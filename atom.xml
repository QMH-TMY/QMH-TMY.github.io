<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Shieber</title>
  
  <subtitle>友朋自远方来，不亦乐乎?</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.shieber.cn/"/>
  <updated>2020-11-11T07:42:38.744Z</updated>
  <id>http://www.shieber.cn/</id>
  
  <author>
    <name>Shieber</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>C、Python、Go、Rust、Dart异常处理</title>
    <link href="http://www.shieber.cn/title/d29eef7e/"/>
    <id>http://www.shieber.cn/title/d29eef7e/</id>
    <published>2020-11-11T07:48:25.000Z</published>
    <updated>2020-11-11T07:42:38.744Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/10/BqY9Og.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第十六篇：异常处理。</p><p>程序中往往会出现错误和异常。</p><ul><li>错误指无法预料的错误或逻辑错误，不可恢复。</li><li>异常指某种可能出现且能预料到的错误，可恢复。</li></ul><p>错误会导致程序崩溃和运行出错，而异常则能得到处理并恢复，下文将异常和错误统称为异常。</p><h1 id="C错误处理"><a href="#C错误处理" class="headerlink" title="C错误处理"></a>C错误处理</h1><p>C语言不直接提供错误处理，但作为系统编程语言，它以返回值的形式允许访问底层数据。C语言中，正常退出会返回0；在发生错误时，大多数的C函数返回1或-1，同时会设置一个错误代码errno，该错误代码为全局变量，表示在函数调用期间发生了错误。</p><p>C语言提供了perror()和strerror()函数来显示与errno相关的消息。perror()函数显示传给它的字符串<br>，strerror()函数返回一个指针，指针指向当前errno值的文本表示。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> errno; <span class="comment">// 错误号</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *pf;</span><br><span class="line">    <span class="keyword">int</span> errnum;</span><br><span class="line"></span><br><span class="line">    pf = fopen(<span class="string">"unexist.txt"</span>,<span class="string">"rb"</span>);</span><br><span class="line">    <span class="keyword">if</span> (pf == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        errnum = errno;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">"错误号: %d\n"</span>,errnum);</span><br><span class="line">        perror(<span class="string">"通过perror输出错误信息"</span>);</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">"打开文件错误:%s\n"</span>,strerror(errnum));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fclose(pf);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// 正常退出，返回0给操作系统</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Python异常处理"><a href="#Python异常处理" class="headerlink" title="Python异常处理"></a>Python异常处理</h1><p>Python自带一套错误断言，处理机制。</p><ul><li>assert 断言</li><li>raise 直接产生错误</li><li>try expect else finally 错误捕获处理</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span> <span class="number">1</span> == <span class="number">2</span> <span class="string">'Error: not equal!'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">raise</span> Exception(<span class="string">"Something wrong, error occurred!"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    x = int(input(<span class="string">"Enter number"</span>))</span><br><span class="line">expect ValueError <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">if</span> x &gt; <span class="number">10000</span>:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">"x must less than 10000"</span>)</span><br><span class="line">    print(x+<span class="number">1</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    print(<span class="string">"Done"</span>)</span><br></pre></td></tr></table></figure><h1 id="Go异常处理"><a href="#Go异常处理" class="headerlink" title="Go异常处理"></a>Go异常处理</h1><p>Go语言通过内置的错误error接口提供了非常简单的错误处理机制。error类型是一个接口类型，它的定义如下：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> error <span class="keyword">interface</span> &#123;</span><br><span class="line">    Error() <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在编码中通过实现error接口类型来生成错误信息，通常在最后的返回值中返回错误信息。使用errors.New可返回一个错误信息：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sqrt</span><span class="params">(x <span class="keyword">float64</span>)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> f &lt; <span class="number">0</span> &#123;</span><br><span class="line">        err := errors.New(<span class="string">"square root fo negative number"</span>)</span><br><span class="line">        <span class="keyword">return</span> err</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>大部分函数调用都会返回两个值，一个值，一个错误err，可以利用err值判断。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">value, err := do_works()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Fatal(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Rust异常处理"><a href="#Rust异常处理" class="headerlink" title="Rust异常处理"></a>Rust异常处理</h1><p>Rust有一套独特的处理异常情况的机制，它不像Python中的try机制那样简单。对于可恢复错误，可使用Result&lt;T,E&gt;来处理，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Result</span></span>&lt;T,E&gt; &#123;</span><br><span class="line">    <span class="literal">Ok</span>(T),</span><br><span class="line">    <span class="literal">Err</span>(E),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不可恢复用panic!，match用于匹配正常或错误情况。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::io::File;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> f = File::open(<span class="string">"main.jpeg"</span>);</span><br><span class="line">    <span class="keyword">match</span> f &#123;</span><br><span class="line">        <span class="literal">Ok</span>(f) =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">"file found &#123;:?&#125;"</span>, f);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="literal">Err</span>(msg) =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">"file not found \n&#123;:?&#125;"</span>, msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">panic!</span>(<span class="string">"Error occurred"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Dart异常处理"><a href="#Dart异常处理" class="headerlink" title="Dart异常处理"></a>Dart异常处理</h1><p>Dart自带异常处理，且异常本身可被传递。Dart提供异常和错误的类型以及预定义的子类，也可以预定义自己的异常子类，Dart允许抛出任意类型的非空对象作为一个异常。</p><ul><li>assert 断言</li><li>throw rethrow  抛出错误/传递错误</li><li>try on catch finnaly 捕获并处理错误</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">    <span class="keyword">assert</span>(urlString.startsWith(<span class="string">"https"</span>), <span class="string">"URL (<span class="subst">$urlString</span>) should start with https."</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">throw</span> <span class="string">"Expected at least 1 section"</span>;</span><br><span class="line">    <span class="keyword">throw</span> FormatException(<span class="string">"Expected at least 1 section"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        do_work1();</span><br><span class="line">    &#125; <span class="keyword">on</span> OutOfLlamasException &#123;</span><br><span class="line">        do_work2();</span><br><span class="line">        <span class="keyword">rethrow</span>; <span class="comment">// 传递错误下去</span></span><br><span class="line">    &#125; <span class="keyword">on</span> Expection <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Unknown error: <span class="subst">$e</span>"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e, s) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Unknown error <span class="subst">$e</span>"</span>);</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"errors stack trace <span class="subst">$s</span>"</span>); <span class="comment">// s是错误栈追踪信息</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/10/BqY9Og.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart的IO和文件读写</title>
    <link href="http://www.shieber.cn/title/5209e731/"/>
    <id>http://www.shieber.cn/title/5209e731/</id>
    <published>2020-11-11T07:11:48.000Z</published>
    <updated>2020-11-11T07:48:08.534Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/09/BHLnCd.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第十五篇：IO和文件读写。</p><p>Linux存在基本的IO，stdin、stdout、stderr。输入可以从stdin、文件、网络而来。输出则对应stdout、stderr、文件、网络。</p><h1 id="C语言的标准IO和文件读写"><a href="#C语言的标准IO和文件读写" class="headerlink" title="C语言的标准IO和文件读写"></a>C语言的标准IO和文件读写</h1><p>C中的IO和File操作函数</p><ul><li>IO (scanf, getchar/putchar, gets/puts)</li><li>File (fopen, fclose, fputc, fputs, fgetc, fgets, fopen, seek, read, write, close)</li><li>File operation mode: r w a r+ w+ a+ together with b</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> integer;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Enter a number:"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;integer);  <span class="comment">// 1</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, integer);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> c;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Enter a char:"</span>);</span><br><span class="line">    c = getchar();  <span class="comment">// 2</span></span><br><span class="line">    <span class="built_in">putchar</span>(c);     <span class="comment">// 3</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Enter a string:"</span>);</span><br><span class="line">    gets(str); <span class="comment">// 4</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\nYou entered::"</span>);</span><br><span class="line">    <span class="built_in">puts</span>(str); <span class="comment">// 5</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 文件描述符fp</span></span><br><span class="line">    fp = fopen(<span class="string">"/tmp/test.txt"</span>, <span class="string">"w+"</span>); <span class="comment">// 6</span></span><br><span class="line">    <span class="built_in">fprintf</span>(fp, <span class="string">"This is testing for fprintf...\n"</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">"This is testing for fputs...\n"</span>, fp); <span class="comment">// 7</span></span><br><span class="line">    fclose(fp); <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line">    FILE *fp = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">char</span> <span class="built_in">buffer</span>[<span class="number">1024</span>];</span><br><span class="line">    fp = fopen(<span class="string">"/tmp/test.txt"</span>, <span class="string">"r"</span>);</span><br><span class="line">    <span class="built_in">fscanf</span>(fp, <span class="string">"%s"</span>, <span class="built_in">buffer</span>); <span class="comment">// 9</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"1:%s\n"</span>, <span class="built_in">buffer</span>);</span><br><span class="line">    fgets(buff, <span class="number">1024</span>, (FILE*)fp); <span class="comment">// 10</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"2:%s\n"</span>, <span class="built_in">buffer</span>);</span><br><span class="line">    fclose(fp); </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Python语言的标准IO和文件读写"><a href="#Python语言的标准IO和文件读写" class="headerlink" title="Python语言的标准IO和文件读写"></a>Python语言的标准IO和文件读写</h1><p>Python中的IO和File操作函数</p><ul><li><p>IO (input, sys.readline, print)</p></li><li><p>File (open, fileno, read, readline, readlines, seek, write)</p><p>  open原型<br>  open(file,mode=’r’,buffering=-1,encoding=None,errors=None, newline=None,closefd=True,opener=None)</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// IO</span><br><span class="line">ipt = int(input(<span class="string">"Please enter a number:"</span>))</span><br><span class="line">print(<span class="string">"You input %d"</span>%ipt)</span><br><span class="line"></span><br><span class="line">// File</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"/tmp/test.txt"</span>, <span class="string">"r"</span>) <span class="keyword">as</span> fobj:</span><br><span class="line">    data = fobj.read()</span><br><span class="line">    print(data)</span><br></pre></td></tr></table></figure><h1 id="Go语言的标准IO和文件读写"><a href="#Go语言的标准IO和文件读写" class="headerlink" title="Go语言的标准IO和文件读写"></a>Go语言的标准IO和文件读写</h1><p>Go中的IO和File操作函数</p><ul><li>IO (io.Read, io.Write)</li><li>File (os.Open, ioutil, buffer)</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"os"</span></span><br><span class="line">    <span class="string">"io/ioutil"</span></span><br><span class="line">    <span class="string">"bufio"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// IO</span></span><br><span class="line">    p := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">1024</span>)</span><br><span class="line">    n, _ := os.Stdin.Read(p[:]) <span class="comment">// 1</span></span><br><span class="line">    fmt.Fprintln(os.Stdout, <span class="keyword">string</span>(p[:]))</span><br><span class="line"></span><br><span class="line">    rd := bufio.NewReader(os.Stdin) <span class="comment">// 2</span></span><br><span class="line">    res, err := rd.ReadString(<span class="string">'\n'</span>)</span><br><span class="line">    fmt.Println(res)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// File</span></span><br><span class="line">    buf := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">1024</span>)</span><br><span class="line">    file, _ := os.Open(<span class="string">"/tmp/test.txt"</span>)</span><br><span class="line">    <span class="keyword">defer</span> file.Close() <span class="comment">// 3</span></span><br><span class="line">    file.Read(buf) <span class="comment">// 4</span></span><br><span class="line">    fmt.Fprintln(os.Stdout, buf)</span><br><span class="line"></span><br><span class="line">    f, _ := ioutil.ReadFile(<span class="string">"file.txt"</span>) <span class="comment">// 5</span></span><br><span class="line">    fmt.Println(<span class="keyword">string</span>(f))</span><br><span class="line"></span><br><span class="line">    fi, _ := os.Open(<span class="string">"file.txt"</span>)</span><br><span class="line">    bf := bufio.NewReader(fi) <span class="comment">// 6</span></span><br><span class="line">    bf.Read(buf) <span class="comment">// 7</span></span><br><span class="line"></span><br><span class="line">    f, _ := os.OpenFile(<span class="string">"file.txt"</span>, os.O_APPEND, <span class="number">0666</span>) <span class="comment">// 8</span></span><br><span class="line">    n, _ := io.WriteString(f, <span class="string">"FUCK"</span>) <span class="comment">// 9</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Rust语言的标准IO和文件读写"><a href="#Rust语言的标准IO和文件读写" class="headerlink" title="Rust语言的标准IO和文件读写"></a>Rust语言的标准IO和文件读写</h1><p>Rust中的IO和File操作函数</p><ul><li>IO (args, read_line, io.Write)</li><li>FILE (open, read_to_string)</li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::&#123;env, fs&#125;;</span><br><span class="line"><span class="keyword">use</span> std::io::stdin;</span><br><span class="line"><span class="keyword">use</span> std::io::prelude::*;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">    <span class="comment">// IO</span></span><br><span class="line">    <span class="keyword">let</span> args = env::args(); <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">for</span> arg <span class="keyword">in</span> args &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, arg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> str_buf = <span class="built_in">String</span>::new();</span><br><span class="line">    stdin().read_line(&amp;<span class="keyword">mut</span> str_buf); <span class="comment">// 2</span></span><br><span class="line">        .expect(<span class="string">"Failed to read line"</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"Your input line is\n&#123;&#125;"</span>, str_buf);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// FILE</span></span><br><span class="line">    <span class="keyword">let</span> text = fs::read_to_string(<span class="string">"file.txt"</span>).unwrap(); <span class="comment">// 3</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, text);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> buffer = [<span class="number">0u8</span>;<span class="number">5</span>];</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> file = fs::File::open(<span class="string">"file.txt"</span>).unwrap(); <span class="comment">// 4</span></span><br><span class="line">    file.read(&amp;<span class="keyword">mut</span> buffer).unwrap(); <span class="comment">// 5</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;"</span>,buffer);</span><br><span class="line"></span><br><span class="line">    fs::write(<span class="string">"test.txt"</span>, buffer).unwrap(); <span class="comment">// 6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Dart语言的标准IO和文件读写"><a href="#Dart语言的标准IO和文件读写" class="headerlink" title="Dart语言的标准IO和文件读写"></a>Dart语言的标准IO和文件读写</h1><p>Dart中的IO和File操作函数</p><ul><li>IO (readLineSync)</li><li>FILE (create, readAsString, writeString)</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"dart:io"</span>;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">    <span class="comment">// IO</span></span><br><span class="line">    <span class="keyword">var</span> line = stdin.readLineSync(encoding:Encoding.getByName(<span class="string">"utf-8"</span>)); <span class="comment">// 1</span></span><br><span class="line">    <span class="built_in">print</span>(line.trim() == <span class="string">"2"</span> ? <span class="string">"Yup"</span>:<span class="string">"Nope"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// File</span></span><br><span class="line">    <span class="keyword">var</span> sysTempDir = Directory.systemTemp;</span><br><span class="line">    <span class="keyword">new</span> File(<span class="string">"$(sysTempDir.path)/dir/subdir/file.txt"</span>)</span><br><span class="line">        .create(recursive:<span class="keyword">true</span>) <span class="comment">// 2</span></span><br><span class="line">        .then((file) &#123;</span><br><span class="line">            <span class="built_in">print</span>(file.path);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> File(filename).writeString(<span class="string">"Fuck"</span>); <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> File(<span class="string">"$(sysTempDir.path)/subdir/file.txt"</span>)</span><br><span class="line">        .readAsString() <span class="comment">// 4</span></span><br><span class="line">        .then((<span class="built_in">String</span> contents) &#123;</span><br><span class="line">            <span class="built_in">print</span>(contents);</span><br><span class="line">        &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> file = <span class="keyword">new</span> File(<span class="string">"file.txt"</span>);</span><br><span class="line">    <span class="keyword">var</span> sink = file.openWrite(); <span class="comment">// 5</span></span><br><span class="line">    sink.write(<span class="string">"File accessed $(new DateTime.now()&#125;\n"</span>); <span class="comment">// 6</span></span><br><span class="line">    sink.close(); <span class="comment">// 7</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/09/BHLnCd.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart标准库依赖关系</title>
    <link href="http://www.shieber.cn/title/3c8372aa/"/>
    <id>http://www.shieber.cn/title/3c8372aa/</id>
    <published>2020-11-11T06:08:33.000Z</published>
    <updated>2020-11-11T07:47:33.610Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/11/BjM3U1.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第十四篇：标准库依赖关系。</p><p>编程语言的标准库往往存在依赖关系，但一定有些库是自满足而不引入其他库的，本文试图探究各库的依赖关系，看看到底一门语言核心的底层库是如何构建起来的。</p><h1 id="C"><a href="#C" class="headerlink" title="C"></a>C</h1><p>C的头文件依赖关系图。（箭头表示引用该库文件）</p><p><img src="https://s1.ax1x.com/2020/11/11/BXLM01.png" alt="c"></p><p>可见，最底层为features, bits, stddef, sys库文件。</p><h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><p>Python的模块依赖关系图</p><p><img src="https://s1.ax1x.com/2020/11/11/BjSRRP.png" alt="py"></p><h1 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h1><p>Go的包依赖关系图，三幅图是一幅从左到右的完整图片。</p><p><img src="https://s1.ax1x.com/2020/11/11/Bj9pX8.png" alt="Go1"></p><p><img src="https://s1.ax1x.com/2020/11/11/Bj9J91.png" alt="Go2"></p><p><img src="https://s1.ax1x.com/2020/11/11/Bj9tc6.png" alt="Go3"></p><h1 id="Rust"><a href="#Rust" class="headerlink" title="Rust"></a>Rust</h1><p>Rust的包依赖关系图关系复杂，但经过分析，可以分层：alloc -&gt; core -&gt; std。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">         +---------------------------------------------------------------------------+</span><br><span class="line">std   -&gt; | any array ascii future env error ffi fs io net option os path thread time | 标准库</span><br><span class="line">         +---------------------------------------------------------------------------+</span><br><span class="line">         +----------------------------------------------------------------------+</span><br><span class="line">core  -&gt; | arch borrow cell <span class="built_in">char</span> clone cmp convert <span class="built_in">f64</span> hash <span class="built_in">i64</span> panic slice <span class="built_in">u64</span> | 核心库</span><br><span class="line">         +----------------------------------------------------------------------+</span><br><span class="line">         +--------------------------------------------------------+</span><br><span class="line">alloc -&gt; | alloc boxed rc collections <span class="built_in">str</span> string sync vec prelude |  内存分配库</span><br><span class="line">         +--------------------------------------------------------+</span><br></pre></td></tr></table></figure><h1 id="Dart"><a href="#Dart" class="headerlink" title="Dart"></a>Dart</h1><p>Dart的库依赖关系图</p><p><img src="https://s1.ax1x.com/2020/11/11/Bjnbxe.png" alt="d"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/11/BjM3U1.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C/Python/Go/Rust/Dart头文件，库，包，模块</title>
    <link href="http://www.shieber.cn/title/67b18606/"/>
    <id>http://www.shieber.cn/title/67b18606/</id>
    <published>2020-11-10T03:25:34.000Z</published>
    <updated>2020-11-11T07:41:19.004Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/11/BX64Bj.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第十三篇：包，库，模块。</p><p>不同语言往往需要引入一些外部代码，这些代码根据语言和组织规则可能被称为头文件、包、库、模块。<br>尽管名字不同，但这些文件都是为了实现代码复用，提高效率，它们都定义一些量，实现一些函数，最后组合在一起。</p><h1 id="C库"><a href="#C库" class="headerlink" title="C库"></a>C库</h1><p>C语言中，存在头文件和库的说法。头文件是一些函数，常量的定义文件，具体实现在各自.c文件中。一部分重要的.h头文件及其.c实现文件组合成了所谓的标准库。其他.c文件使用时直接包含include头文件就可以使用其内部定义的函数。</p><p>C标准库包含如下文件：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">C 标准库  &lt;assert.h&gt; <span class="comment">// 定义变量以验证程序</span></span><br><span class="line">C 标准库  &lt;ctype.h&gt;  <span class="comment">// 定义测试和映射字符的函数</span></span><br><span class="line">C 标准库  &lt;errno.h&gt;  <span class="comment">// 定义错误处理变量和函数</span></span><br><span class="line">C 标准库  &lt;<span class="keyword">float</span>.h&gt;  <span class="comment">// 定义浮点数相关量</span></span><br><span class="line">C 标准库  &lt;limits.h&gt; <span class="comment">// 定义各变量类型属性</span></span><br><span class="line">C 标准库  &lt;locale.h&gt; <span class="comment">// 定义特定地域的设置，如日期格式和货币符号</span></span><br><span class="line">C 标准库  &lt;math.h&gt;   <span class="comment">// 定义各种数学函数</span></span><br><span class="line">C 标准库  &lt;setjmp.h&gt; <span class="comment">// 定义特殊跳转函数</span></span><br><span class="line">C 标准库  &lt;signal.h&gt; <span class="comment">// 定义进程间信号</span></span><br><span class="line">C 标准库  &lt;stdarg.h&gt; <span class="comment">// 定义参数相关宏</span></span><br><span class="line">C 标准库  &lt;stddef.h&gt; <span class="comment">// 定义标准变量和宏</span></span><br><span class="line">C 标准库  &lt;stdio.h&gt;  <span class="comment">// 定义标准输入输出函数 </span></span><br><span class="line">C 标准库  &lt;stdlib.h&gt; <span class="comment">// 定义库变量和工具函数 </span></span><br><span class="line">C 标准库  &lt;<span class="built_in">string</span>.h&gt; <span class="comment">// 定义字符串函数</span></span><br><span class="line">C 标准库  &lt;time.h&gt;   <span class="comment">// 定义时间处理函数</span></span><br></pre></td></tr></table></figure><h1 id="Python模块"><a href="#Python模块" class="headerlink" title="Python模块"></a>Python模块</h1><p>Python中不需要头文件，它直接在一个文件中定义定义函数和变量，这些文件再组合成为模块。模块可以被别的程序引入(import)，以使用该模块中的函数等功能。</p><p>部分Python标准模块如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#文件处理            #数据压缩打包           #结构化文档</span></span><br><span class="line">string              zlib                  html</span><br><span class="line">re                  gzip                  xml</span><br><span class="line">difflib             bz2                   </span><br><span class="line">textwrap            lzma                  <span class="comment">#网络协议</span></span><br><span class="line">unicodedata         zipfile               webbrowser</span><br><span class="line">stringprep          tarfile               cgi</span><br><span class="line">readline                                  cgitb</span><br><span class="line">rlcompleter         <span class="comment">#文档格式              wsgiref</span></span><br><span class="line">                    csv                   urllib</span><br><span class="line"><span class="comment">#二进制数据服务       configparse           http</span></span><br><span class="line">struct              netrc                 ftplib</span><br><span class="line">codecs              xdrlib                poplib</span><br><span class="line">                    plistlib              imaplib</span><br><span class="line"><span class="comment">#数据类型                                  nntplib</span></span><br><span class="line">datetime            <span class="comment">#加密                  smtplib</span></span><br><span class="line">zoneinfo            hashlib               smtpd</span><br><span class="line">calendar            hamc                  telnetlib</span><br><span class="line">collections         secrets               uuid</span><br><span class="line">heapq                                     socketserver</span><br><span class="line">bisect              <span class="comment">#操作系统              xmlrpc</span></span><br><span class="line">array               os                    ipaddress</span><br><span class="line">weakref             io                    </span><br><span class="line">types               time                  <span class="comment">#多媒体</span></span><br><span class="line">copy                argparse              audioop</span><br><span class="line">pprint              getopt                aifc</span><br><span class="line">reprlib             logging               sunau</span><br><span class="line">enum                getpass               wave</span><br><span class="line">graphlib            curses                chunk</span><br><span class="line">                    platform              colorsys</span><br><span class="line"><span class="comment">#数值和数学           errno                 imghdr</span></span><br><span class="line">numbers             ctypes                sndhrd</span><br><span class="line">math                                      ossaudiodev</span><br><span class="line">cmath               <span class="comment">#并发                 </span></span><br><span class="line">decimal             threading             <span class="comment">#国际化</span></span><br><span class="line">fractions           multiprocessing       gettext</span><br><span class="line">random              concurrent            local</span><br><span class="line">statistics          subprocess            </span><br><span class="line">                    sched                 <span class="comment">#编程框架</span></span><br><span class="line"><span class="comment">#函数编程            queue                 turtle</span></span><br><span class="line">itertools                                 cmd</span><br><span class="line">functools           <span class="comment">#网络及进程间通信        shlex</span></span><br><span class="line">operator            asyncio               </span><br><span class="line">                    socket                <span class="comment">#图形化</span></span><br><span class="line"><span class="comment">#文件和目录           ssl                   tkinter</span></span><br><span class="line">pathlib             select                IDLE</span><br><span class="line">os.path             selectors             </span><br><span class="line">fileinput           asyncore              <span class="comment">#开发工具</span></span><br><span class="line">stat                asynchat              typing</span><br><span class="line">filecmp             signal                pydoc</span><br><span class="line">tempfile            mmap                  doctest</span><br><span class="line">glob                                      unittest</span><br><span class="line">fnmatch             <span class="comment">#网络数据              2to3</span></span><br><span class="line">linecache           email                 test            </span><br><span class="line">shutil              json</span><br><span class="line">                    mailcap</span><br><span class="line"><span class="comment">#数据持久化           mailbox</span></span><br><span class="line">pickle              mimetypes</span><br><span class="line">copyreg             base64</span><br><span class="line">shelve              binhex</span><br><span class="line">marshal             binascii</span><br><span class="line">dbm                 quopri</span><br><span class="line">sqlite3             uu</span><br></pre></td></tr></table></figure><h1 id="Go包"><a href="#Go包" class="headerlink" title="Go包"></a>Go包</h1><p>Go语言将代码集合称为包，使用包需要用import导入，下面是标准包：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">archive             压缩打包</span><br><span class="line">bufio               带缓存的I/O操作</span><br><span class="line">builtin             Go预声明标识符文档</span><br><span class="line">bytes               操作[]<span class="keyword">byte</span>常用函数</span><br><span class="line">compress            数据压缩</span><br><span class="line">container           实现了对，循环队列，链表</span><br><span class="line">context             上下文</span><br><span class="line">crypto              常用密码算法常量</span><br><span class="line">database            数据库接口</span><br><span class="line">debug               代码调试</span><br><span class="line">encoding            字节和文本间转换接口</span><br><span class="line">errors              错误处理函数</span><br><span class="line">expvar              公共变量标准接口</span><br><span class="line">flag                令行标签解析</span><br><span class="line">fmt                 格式化I/O函数</span><br><span class="line"><span class="keyword">go</span>                  工具函数</span><br><span class="line">hash                哈希函数接口</span><br><span class="line">html                转义和解转义HTML文本</span><br><span class="line">image               基本的<span class="number">2</span>D图片库</span><br><span class="line">index               索引</span><br><span class="line">io                  为I/O原语提供基础接口</span><br><span class="line">log                 实现简单日志服务</span><br><span class="line">math                提供基本常数和数学函数</span><br><span class="line">mime                实现MIME部分规定</span><br><span class="line">net                 提供可移植的网络I/O接口</span><br><span class="line">os                  提供不依赖平台接口的操作系统函数</span><br><span class="line">path                对斜杠分隔的路径操作</span><br><span class="line">plugin              加载插件</span><br><span class="line">reflect             实现运行时反射，允许操作任意类型对象</span><br><span class="line">regexp              实现正则表达式搜索</span><br><span class="line">runtime             包含与Go运行时系统进行交互的操作</span><br><span class="line">sort                为切片及用户定义集合排序操作提供原语</span><br><span class="line">strconv             实现基本数据类型和其字符串表示的相互转换</span><br><span class="line">strings             实现了用于操作字符的简单函数</span><br><span class="line">sync                提供互斥锁这类基本的同步原语</span><br><span class="line">syscall             系统调用</span><br><span class="line">testing             测试框架</span><br><span class="line">text                实现文本处理</span><br><span class="line">time                提供时间显示和测量函数</span><br><span class="line">unicode             提供测试Unicode码点属性的数据和函数</span><br><span class="line">unsafe              包含关于Go程序类型安全的所有操作</span><br></pre></td></tr></table></figure><h1 id="Rust包-crate、库-模块"><a href="#Rust包-crate、库-模块" class="headerlink" title="Rust包/crate、库/模块"></a>Rust包/crate、库/模块</h1><p>Rust里面存在包，库，模块，crate等说法，且都有对应实体。应该说Rust里面，用cargo new<br>生成的就是包，一个包里有多个目录，一个目录看成一个crate，当这个crate编译后，可能是一个二进制可执行文件，也可能是一个供其他函数调用的库。一个crate里面，往往有很多.rs文将，这些文件称为模块(mod)，使用这些文件或模块需要用use。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package --&gt; crates  (dirs)     一个包存在多个<span class="keyword">crate</span>(dir)</span><br><span class="line"><span class="keyword">crate</span>   --&gt; modules (lib/EFL)  一个<span class="keyword">crate</span>包含多个模块(<span class="keyword">mod</span>)，其<span class="keyword">crate</span>可编译成库或可执行文件</span><br><span class="line">module  --&gt; file.rs (file)     一个模块就是一个.rs文件</span><br><span class="line"></span><br><span class="line">package            &lt;-- 包</span><br><span class="line">├── Cargo.toml</span><br><span class="line">├── src            &lt;-- <span class="keyword">crate</span></span><br><span class="line">│    ├── main.rs   &lt;-- 模块，主模块</span><br><span class="line">│    ├── lib.rs    &lt;-- 模块，库模块(可编译成库或可执行文件)</span><br><span class="line">│    └── math      &lt;-- 模块，数学函数模块math</span><br><span class="line">│        ├─ <span class="keyword">mod</span>.rs &lt;-- 模块，为math模块引入add和sub模块中函数</span><br><span class="line">│        ├─ add.rs &lt;-- 模块，实现数学函数模块的add函数</span><br><span class="line">│        └─ sub.rs &lt;-- 模块，实现数学函数模块的sub函数</span><br><span class="line">└── file           &lt;-- <span class="keyword">crate</span></span><br><span class="line">     ├── core      &lt;-- 模块，文件操作模块</span><br><span class="line">     └── clear     &lt;-- 模块，清理模块</span><br></pre></td></tr></table></figure><p>Rust标准库如下：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">alloc              hint            mem    </span><br><span class="line">any                <span class="built_in">i8</span>              ptr</span><br><span class="line">array              <span class="built_in">i16</span>             rc</span><br><span class="line">ascii              <span class="built_in">i32</span>             result</span><br><span class="line">borrow             <span class="built_in">i64</span>             slice</span><br><span class="line">boxed              <span class="built_in">i128</span>            <span class="built_in">str</span></span><br><span class="line">cell               io              string</span><br><span class="line"><span class="built_in">char</span>               <span class="built_in">isize</span>           sync</span><br><span class="line">clone              iter            task</span><br><span class="line">cmp                marker          thread</span><br><span class="line">collections        net             time</span><br><span class="line">convert            num             <span class="built_in">u8</span>      </span><br><span class="line">default            ops             <span class="built_in">u16</span></span><br><span class="line">env                option          <span class="built_in">u32</span></span><br><span class="line">error              os              <span class="built_in">u64</span></span><br><span class="line"><span class="built_in">f32</span>                panic           <span class="built_in">u128</span></span><br><span class="line"><span class="built_in">f64</span>                path            <span class="built_in">usize</span></span><br><span class="line">ffi                pin             vec</span><br><span class="line">fmt                prelude         backtrace</span><br><span class="line">fs                 primitive       intrinsics</span><br><span class="line">future             process         lazy</span><br><span class="line">hash                               raw</span><br></pre></td></tr></table></figure><h1 id="Dart库"><a href="#Dart库" class="headerlink" title="Dart库"></a>Dart库</h1><p>Dart语言将各种代码组合起来称为库，使用时用import引入。</p><p>Dart标准库如下：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>          异步编程    </span><br><span class="line">archive        打包压缩</span><br><span class="line">http           使用http</span><br><span class="line">intl           国际化</span><br><span class="line">logging        日志</span><br><span class="line">path           路径处理</span><br><span class="line">shelf          web中间件</span><br><span class="line">test           测试</span><br><span class="line">yaml           yaml解析器</span><br><span class="line"><span class="keyword">async</span>          异步编程    </span><br><span class="line">collection     集合操作工具类</span><br><span class="line">convert        编码转换</span><br><span class="line">core           内置类型，集合</span><br><span class="line">developer      调试器和分析器</span><br><span class="line">math           数学函数</span><br><span class="line">type_data      高效处理固定大小数据</span><br><span class="line">io             IO操作</span><br><span class="line">isolate        并发</span><br><span class="line">mirrors        反射功能</span><br><span class="line">html           web开发</span><br><span class="line">indexed_db     使用键值对索引</span><br><span class="line">web_*          浏览器相关</span><br><span class="line">js             javascript支持</span><br><span class="line">ffi            支持和其他语言的调用</span><br><span class="line">wasm           编译成webassembly</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/11/BX64Bj.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart面向过程和对象</title>
    <link href="http://www.shieber.cn/title/7aab52cf/"/>
    <id>http://www.shieber.cn/title/7aab52cf/</id>
    <published>2020-11-09T13:18:31.000Z</published>
    <updated>2020-11-11T07:40:56.505Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/09/BbPTC6.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第十二篇：面向过程和面向对象。</p><p>面向对象的特点</p><ul><li>封装</li><li>继承</li><li>多态</li></ul><p>面向对象涉及术语</p><ul><li>类: 用来描述具有相同的属性和方法的对象的集合。</li><li>继承：一个派生类继承基类的字段和方法。</li><li>对象：通过类定义的数据结构实例。对象包括数据成员和方法。</li><li>方法：类中定义的函数。</li><li>类变量：类变量是类的属性，类变量定义在类中且在函数体之外。</li><li>数据成员：类变量或者实例变量用于处理类及其实例对象的相关的数据。</li><li>方法重写：从父类继承的方法不能满足子类需求，可对其进行改写，这个过程叫方法覆盖或重写。</li><li>局部变量：定义在方法中的变量，只作用于当前实例的类。</li><li>类实例化：创建一个类的实例，类的具体对象。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以Python为例子</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span><span class="params">()</span>:</span>          <span class="comment">#Animal类</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age, weight)</span>:</span></span><br><span class="line">        self.name = name <span class="comment">#类变量</span></span><br><span class="line">        self.age = age</span><br><span class="line">        self.weight = weight</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getName</span><span class="params">(self)</span>:</span>   <span class="comment">#方法</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getAge</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getWeight</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.weight</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getInfo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">"name"</span>: self.name, <span class="string">"age"</span>: self.age, <span class="string">"weight"</span>: self.weight&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span><span class="params">(Animal)</span>:</span>       <span class="comment">#继承</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age, weight, color)</span>:</span></span><br><span class="line">        super().__init__(name, age, weight)</span><br><span class="line">        self.color = color</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getName</span><span class="params">(self)</span>:</span>   <span class="comment">#重写</span></span><br><span class="line">        tp = <span class="string">"Cat: "</span>     <span class="comment">#局部变量</span></span><br><span class="line">        <span class="keyword">return</span> tp + self.name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getColor</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.color</span><br><span class="line"></span><br><span class="line">animal = Animal()        <span class="comment">#实例化，animal为对象</span></span><br></pre></td></tr></table></figure><p>面向过程和对象的语言</p><ul><li>C语言是面向过程的语言，只需要实现各种函数，然后调用，各函数独立。</li><li>Python语言是面向对象的语言，可用class来定义类，函数定义在类中。</li><li>Go语言中没有面向对象的类，但通过struct和interface能实现面向对象功能。</li><li>Rust不是面向对象的编程语言，但通过组合，这些面向对象的功能都能得以实现。</li><li>Dart语言是面向对象的语言，在Dart中一切都是对象，即便是数字和空都是对象Object的子类。</li></ul><p>可见，只有C语言才真的无法实现面向对象，C++正好补充了C的这点不足。</p><h1 id="C面向过程"><a href="#C面向过程" class="headerlink" title="C面向过程"></a>C面向过程</h1><p>实现各种函数，再在对应函数中调用，最后由main调用。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">square</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">quadratic</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    a = <span class="number">3</span>;</span><br><span class="line">    b = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"square of a+b is %d\n"</span>, square(a,b)); <span class="comment">// 调用1</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"quadratic of a+b is %d\n"</span>, quadratic(a+b)); <span class="comment">// 调用2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">square</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ( a + b) * ( a + b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">quadratic</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a + b) * (a + b) * ( a + b) * (a + b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Python面向对象"><a href="#Python面向对象" class="headerlink" title="Python面向对象"></a>Python面向对象</h1><p>Python自带self表示类自身。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, radius)</span>:</span></span><br><span class="line">        self.radius = radius</span><br><span class="line">        self.__PI = <span class="number">3.141592653</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getArea</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__PI * self.radius * self.radius</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getDiameter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * self.radius</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getPerimeter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * self.__PI * self.radius</span><br></pre></td></tr></table></figure><h1 id="Go面向对象"><a href="#Go面向对象" class="headerlink" title="Go面向对象"></a>Go面向对象</h1><p>Go利用struct和interface组合实现面向对象功能。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PI = <span class="number">3.141592653</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 形状接口</span></span><br><span class="line"><span class="keyword">type</span> Shape <span class="keyword">interface</span> &#123;</span><br><span class="line">    getArea() <span class="keyword">float64</span></span><br><span class="line">    getDiameter() <span class="keyword">float64</span></span><br><span class="line">    getPerimeter() <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 圆及其面积，周长，直径计算方法</span></span><br><span class="line"><span class="keyword">type</span> Circle <span class="keyword">struct</span> &#123;</span><br><span class="line">    Radius <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Circle)</span> <span class="title">getArea</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> PI * s.Radius * s.Radius</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Circle)</span> <span class="title">getPerimeter</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * PI * s.Radius</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Circle)</span> <span class="title">getDiameter</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * s.Radius</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 长方形及其面积，周长，直径(斜边长)计算方法</span></span><br><span class="line"><span class="keyword">type</span> Rectangle <span class="keyword">struct</span> &#123;</span><br><span class="line">    width <span class="keyword">float64</span></span><br><span class="line">    length <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Rectangle)</span> <span class="title">getArea</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r.width * r.length</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Rectangle)</span> <span class="title">getPerimeter</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * ( r.width + r.length )</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Rectangle)</span> <span class="title">getDiameter</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> math.sqrt(r.width * r.width + r.length * r.length)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getArea</span><span class="params">(s *Shape)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> s.getArea()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getDiameter</span><span class="params">(s *Shape)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> s.getDiameter()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getPerimeter</span><span class="params">(s *Shape)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> s.getPerimeter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> area, diameter, perimeter <span class="keyword">float64</span></span><br><span class="line"></span><br><span class="line">    circle := Circle&#123; Radius: <span class="number">2.54</span> &#125;</span><br><span class="line">    area = getArea(circle)</span><br><span class="line">    diameter = getDiameter(circle)</span><br><span class="line">    perimeter = getPerimeter(circle)</span><br><span class="line">    fmt.Printf(<span class="string">"Area: %.2f"</span>, area)</span><br><span class="line">    fmt.Printf(<span class="string">"Diam: %.2f"</span>, diameter)</span><br><span class="line">    fmt.Printf(<span class="string">"Peri: %.2f"</span>, perimeter)</span><br><span class="line"></span><br><span class="line">    rectangle = Rectangle&#123; width: <span class="number">2.13</span>, height: <span class="number">3.54</span> &#125;</span><br><span class="line">    area = getArea(rectangle)</span><br><span class="line">    diameter = getDiameter(rectangle)</span><br><span class="line">    perimeter = getPerimeter(rectangle)</span><br><span class="line">    fmt.Printf(<span class="string">"Area: %.2f"</span>, area)</span><br><span class="line">    fmt.Printf(<span class="string">"Diam: %.2f"</span>, diameter)</span><br><span class="line">    fmt.Printf(<span class="string">"Peri: %.2f"</span>, perimeter)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Rust面向对象"><a href="#Rust面向对象" class="headerlink" title="Rust面向对象"></a>Rust面向对象</h1><p>Rust可通过模块来实现封装，使用结构体的impl实现类的功能，trait实现多态。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// f.rs</span></span><br><span class="line"><span class="keyword">pub</span> <span class="class"><span class="keyword">struct</span> <span class="title">Number</span></span> &#123;</span><br><span class="line">    field: <span class="built_in">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Number &#123; <span class="comment">// 为Number实现各种操作函数</span></span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>(value: <span class="built_in">i32</span>) -&gt; Number &#123;</span><br><span class="line">        Number&#123;</span><br><span class="line">            field: value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">do_public_works</span></span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"from public method"</span>);</span><br><span class="line">        <span class="keyword">self</span>.private_works();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">private_works</span></span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"from private method"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.rs</span></span><br><span class="line"><span class="keyword">mod</span> f</span><br><span class="line"><span class="keyword">use</span> f::Number;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> obj = Number::new(<span class="number">1024</span>);</span><br><span class="line">    obj.do_public_works();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Dart面向对象"><a href="#Dart面向对象" class="headerlink" title="Dart面向对象"></a>Dart面向对象</h1><p>Dart本身支持面向对象，使用class定义.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123; <span class="comment">// 类</span></span><br><span class="line">    <span class="built_in">String</span> name;</span><br><span class="line">    <span class="built_in">int</span> age;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> address = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    Person(<span class="built_in">String</span> name, <span class="built_in">int</span> age) &#123; <span class="comment">// 构造函数</span></span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> getInfo() &#123; <span class="comment">// 默认公开</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Name: <span class="subst">$name</span>, Age: <span class="subst">$age</span>, Address: <span class="subst">$address</span>"</span>); </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> _work() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Private work"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">    <span class="comment">//var person = new Person("Tim", 20);</span></span><br><span class="line">    <span class="keyword">var</span> person = Person();</span><br><span class="line">    person.name = <span class="string">"Tom"</span>;</span><br><span class="line">    person.age = <span class="number">24</span>;</span><br><span class="line">    person.address = <span class="string">"UESTC"</span>;</span><br><span class="line"></span><br><span class="line">    person?.getInfo(); <span class="comment">// person为空时，不调用</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> person1;</span><br><span class="line">    person1 = <span class="string">""</span>;</span><br><span class="line">    (person1 <span class="keyword">as</span> Person)?.getInfo();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/09/BbPTC6.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart内置函数</title>
    <link href="http://www.shieber.cn/title/20d2819d/"/>
    <id>http://www.shieber.cn/title/20d2819d/</id>
    <published>2020-11-09T12:01:57.000Z</published>
    <updated>2020-11-11T07:40:43.933Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/10/BqzEUx.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第十一篇：内置函数。</p><p>内置函数多是实现的某些通用功能，可以提高程序开发的效率，提升代码的重用性。</p><h1 id="C内置函数"><a href="#C内置函数" class="headerlink" title="C内置函数"></a>C内置函数</h1><p>C的内置函数在stdio.h，time.h，ctype.h，string.h等头文件中定义，使用时需导入对应头文件。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C各头文件内置函数</span></span><br><span class="line">&lt;stdio.h&gt;   <span class="built_in">isalpha</span>()</span><br><span class="line"><span class="built_in">printf</span>()    <span class="built_in">isdigit</span>()</span><br><span class="line"><span class="built_in">scanf</span>()     <span class="built_in">toupper</span>()</span><br><span class="line">getchar()   <span class="built_in">tolower</span>()</span><br><span class="line"><span class="built_in">putchar</span>()   </span><br><span class="line">            &lt;math.h&gt;</span><br><span class="line">&lt;time.h&gt;    <span class="built_in">ceil</span>()</span><br><span class="line">time()      <span class="built_in">floor</span>()</span><br><span class="line">            <span class="built_in">sqrt</span>();</span><br><span class="line">&lt;<span class="built_in">string</span>.h&gt;  <span class="built_in">pow</span>();</span><br><span class="line"><span class="built_in">strcpy</span>()    <span class="built_in">abs</span>();</span><br><span class="line"><span class="built_in">strcmp</span>()    </span><br><span class="line">            &lt;stdlib.h&gt;</span><br><span class="line">&lt;ctype.h&gt;   srand()</span><br><span class="line"><span class="built_in">isupper</span>()   rand()</span><br><span class="line"><span class="built_in">islower</span>()   <span class="built_in">exit</span>()</span><br><span class="line">            system()</span><br></pre></td></tr></table></figure><h1 id="Python内置函数"><a href="#Python内置函数" class="headerlink" title="Python内置函数"></a>Python内置函数</h1><p>Python内置的函数非常好用，不需要导入包，写代码时直接使用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python内置函数</span></span><br><span class="line">abs()          dict()       help()        min()       setattr()</span><br><span class="line">all()          dir()        hex()         next()      slice()</span><br><span class="line">any()          divmod()     id()          object()    sorted()</span><br><span class="line">ascii()        enumerate()  input()       oct()       staticmethod()</span><br><span class="line">bin()          eval()       int()         open()      str()</span><br><span class="line">bool()         exec()       isinstance()  ord()       sum()</span><br><span class="line">bytearray()    filter()     issubclass()  pow()       super()</span><br><span class="line">bytes()        float()      iter()        print()     tuple()</span><br><span class="line">callable()     format()     len()         property()  type()</span><br><span class="line">chr()          frozenset()  list()        range()     vars()</span><br><span class="line">classmethod()  getattr()    locals()      repr()      zip()</span><br><span class="line">compile()      globals()    map()         reversed()  __import__()</span><br><span class="line">complex()      hasattr()    max()         round()</span><br><span class="line">delattr()      hash()       memoryview()  set()</span><br></pre></td></tr></table></figure><h1 id="Go内置函数"><a href="#Go内置函数" class="headerlink" title="Go内置函数"></a>Go内置函数</h1><p>Go虽然继承了C的很多特性，但它的内置函数不是如C那般放在库中，反而如Python般，直接实现在编译器中。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Go内置函数</span></span><br><span class="line">init()     初始化<span class="keyword">package</span></span><br><span class="line"><span class="built_in">append</span>()   追加元素到数组、slice</span><br><span class="line"><span class="built_in">copy</span>()     复制和连接slice</span><br><span class="line"><span class="built_in">close</span>()    关闭channel</span><br><span class="line"><span class="built_in">delete</span>()   从<span class="keyword">map</span>中删除key对应的value</span><br><span class="line"><span class="built_in">new</span>()      用来分配内存，用来分配值类型</span><br><span class="line"><span class="built_in">make</span>()     来分配内存，返回Type本身，只用于slice, <span class="keyword">map</span>, channel</span><br><span class="line"><span class="built_in">len</span>()      求长度</span><br><span class="line"><span class="built_in">cap</span>()      求容量</span><br><span class="line"><span class="built_in">real</span>()     返回<span class="built_in">complex</span>的实部</span><br><span class="line"><span class="built_in">imag</span>()     返回<span class="built_in">complex</span>的虚部</span><br><span class="line"><span class="built_in">panic</span>()    立即崩溃</span><br><span class="line"><span class="built_in">recover</span>()  从崩溃中恢复</span><br></pre></td></tr></table></figure><h1 id="Rust内置函数"><a href="#Rust内置函数" class="headerlink" title="Rust内置函数"></a>Rust内置函数</h1><p>Rust中并不存在内置函数，一切都需要自己定义。但是Rust实现了一套高效的宏（函数宏，过程宏），函数宏也可看成内置函数来用。当然也可用macro_rules!自定义宏。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Rust内建函数宏</span></span><br><span class="line"><span class="built_in">println!</span>()</span><br><span class="line"><span class="built_in">panic!</span>()</span><br><span class="line"><span class="built_in">vec!</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Rust建宏规则</span></span><br><span class="line"><span class="built_in">macro_rules!</span> xxx_macro &#123;</span><br><span class="line">    code_body</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Dart内置函数"><a href="#Dart内置函数" class="headerlink" title="Dart内置函数"></a>Dart内置函数</h1><p>Dart内置的函数多放置在dart:core, dart:io, dart:math, dart:convert库中。其他一些函数是内建的，可以直接使用。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="keyword">assert</span>()</span><br><span class="line"><span class="built_in">List</span>()</span><br><span class="line"><span class="built_in">Map</span>()</span><br><span class="line"><span class="built_in">Set</span>()</span><br><span class="line">Runes()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/10/BqzEUx.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="dart" scheme="http://www.shieber.cn/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart作用域</title>
    <link href="http://www.shieber.cn/title/6587fc8f/"/>
    <id>http://www.shieber.cn/title/6587fc8f/</id>
    <published>2020-11-09T09:38:28.000Z</published>
    <updated>2020-11-11T07:26:13.268Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/09/BHYJtP.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第十篇：作用域。</p><p>作用域是程序中定义的变量所存在的区域，超过该区域变量就不能被访问。如果再访问，就可能访问到其他内存区域引起程序崩溃。不同的语言对其变量都设置了作用域。</p><h1 id="C作用域规则"><a href="#C作用域规则" class="headerlink" title="C作用域规则"></a>C作用域规则</h1><p>C语言中存在三种变量  </p><ul><li>在函数或块内部的局部变量，它们只能被该函数或该代码块内部的语句使用。 </li><li>在所有函数外部的全局变量，在整个程序生命周期内有效，任意函数内部能访问。</li><li>在函数中定义的的形式参数，被当作该函数内的局部变量，如与全局变量同名会优先使用参数。</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;      // 数据类型        初始化值</span></span></span><br><span class="line">                        <span class="comment">// int             0</span></span><br><span class="line"><span class="keyword">int</span> g; <span class="comment">//全局           // char            '\0'</span></span><br><span class="line">                        <span class="comment">// float           0</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;            <span class="comment">// double          0</span></span><br><span class="line">                        <span class="comment">// pointer         NULL</span></span><br><span class="line">    <span class="keyword">int</span> a, b, c; <span class="comment">//局部</span></span><br><span class="line">    a = <span class="number">10</span>;</span><br><span class="line">    b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    g = a + b;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"a = %d, b = %d, d = %d\n"</span>, a, b, g);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span>;</span><br><span class="line">    c = sum(a, b); <span class="comment">// 参数</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"c = %d\n"</span>, c);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> sum(<span class="keyword">int</span> a, <span class="keyword">int</span> b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Python作用域规则"><a href="#Python作用域规则" class="headerlink" title="Python作用域规则"></a>Python作用域规则</h1><p>Python的作用域又叫命名空间(Namespace)。命名空间是从名称到对象的映射，大部分的命名空间都是通过字典来实现的。命名空间提供了在项目中避免名字冲突的一种方法。各个命名空间是独立的，没有任何关系的，所以一个命名空间中不能有重名，但不同的命名空间是可以重名而没有任何影响。</p><p>Python中存在四种作用域</p><ul><li>内置空间，Python内置的函数名，异常等。</li><li>全局空间，模块中定义，包括模块，类，函数，常量/变量。</li><li>嵌套空间，在内层函数中引用外层函数定义的名称，变量，参数。</li><li>局部空间，函数中定义的名称，变量，参数。</li></ul><p>搜索规则是局部-&gt;嵌套-&gt;全局-&gt;内置，使用不同空间的变量要使用global和nonlocal关键字。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">5</span> <span class="comment">#全局</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_1</span><span class="params">()</span>:</span></span><br><span class="line">    v2 = <span class="number">7</span>   <span class="comment">#局部</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func_2</span><span class="params">()</span>:</span></span><br><span class="line">        v3 = <span class="number">9</span>   <span class="comment">#内嵌局部</span></span><br><span class="line"></span><br><span class="line">num = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_3</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> num</span><br><span class="line"></span><br><span class="line">    num1 = num + <span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func_4</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">nonlocal</span> num1</span><br><span class="line">        num1 +=  <span class="number">1</span></span><br><span class="line">        print(num1)</span><br><span class="line"></span><br><span class="line">    func_4()</span><br><span class="line">    print(num, num1)</span><br><span class="line"></span><br><span class="line">    num = <span class="number">123</span></span><br><span class="line">    print(num)</span><br></pre></td></tr></table></figure><h1 id="Go作用域规则"><a href="#Go作用域规则" class="headerlink" title="Go作用域规则"></a>Go作用域规则</h1><p>Go作为类C语言，作用域规则和C一样。</p><p>Go的作用域规则</p><ul><li>函数内定义的变量称为局部变量</li><li>函数外定义的变量称为全局变量</li><li>函数定义中的变量称为形式参数</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main             <span class="comment">// 数据类型        初始化值    </span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span>             <span class="comment">// int            0</span></span><br><span class="line">                         <span class="comment">// float32        0</span></span><br><span class="line"><span class="keyword">var</span> g <span class="keyword">int</span>                <span class="comment">// pointer        nil</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a, b, c <span class="keyword">int</span> <span class="comment">// 局部</span></span><br><span class="line">    a,b = <span class="number">10</span>, <span class="number">20</span></span><br><span class="line">    c = sum(a, b)   <span class="comment">// 参数</span></span><br><span class="line">    g = c * a;      <span class="comment">// 全局</span></span><br><span class="line"></span><br><span class="line">    fmt.Printf(<span class="string">"a=%d, b=%d, c=%d, g=%d\n"</span>, a,b,c,g)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Rust作用域规则"><a href="#Rust作用域规则" class="headerlink" title="Rust作用域规则"></a>Rust作用域规则</h1><p>Rust引入了所有权/借用，生命周期等概念，所以它的作用域规则是所有语言中最严格的，Rust的变量只能按照生命周期和所有权机制，在某个代码块中存在，Rust的困难有一部分就在于其作用域规则。引入这些概念主要还是为了应对复杂类型系统中资源管理的问题，解决悬荡引用等安全问题。</p><p>Rust语言中的作用域概念</p><ul><li>所有权/借用</li><li>生命周期，用’加小写字母，如’a</li><li>静态生命周期，表示从程序运行开始到结束都存在，用’static</li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">longer</span></span>&lt;<span class="symbol">'a</span>&gt;(s1:&amp;<span class="symbol">'a</span> <span class="built_in">str</span>, s2:&amp;<span class="symbol">'a</span> <span class="built_in">str</span>) -&gt; &amp;<span class="symbol">'a</span> <span class="built_in">str</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> s2.len() &gt; s1.len() &#123;</span><br><span class="line">        s2</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        s1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> long_lived = <span class="number">1</span>;             &lt;----------- long_lived  出现</span><br><span class="line">                                    </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> short_lived = <span class="number">2</span>;        &lt;----------- short_lived 出现</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"inner short: &#123;&#125;"</span>, short_lived);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> long_lived = <span class="number">5_f32</span>;     &lt;----------- long_lived  出现(内部)</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"inner long: &#123;&#125;"</span>, long_lived);</span><br><span class="line">    &#125;                               &lt;----------- long_lived 和 short_lived 清除</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> long_lived = <span class="string">'a'</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"outer long: &#123;&#125;"</span>, long_lived);</span><br><span class="line">&#125;                                   &lt;----------- long_lived  清除(外部)</span><br></pre></td></tr></table></figure><h1 id="Dart作用域规则"><a href="#Dart作用域规则" class="headerlink" title="Dart作用域规则"></a>Dart作用域规则</h1><p>Dart是一门真正面向对象的语言，甚至其中的函数也是对象，并且有它的类型Function。这意味着函数可以被赋值给变量或者作为参数传递给其他函数。在函数main之外定义的函数，或是直接在main函数中定义的函数都是全局函数，除此之外，其他函数中定义函数为局部函数。</p><p>Dart作用域概念</p><ul><li>局部变量，函数内可见。</li><li>形式参数，函数内可见。</li><li>全局变量，程序中可见。</li><li>词法闭包，只要调用就可见。</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span> makeAdder(<span class="built_in">num</span> addBy) &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">num</span> i) =&gt; addBy + i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> topLevel = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">    <span class="keyword">var</span> innerMain = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> myFunction() &#123;</span><br><span class="line">        <span class="keyword">var</span> insideFunc = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">void</span> nestedFunction() &#123;</span><br><span class="line">            <span class="keyword">var</span> insideNestedFunction = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">assert</span>(topLevel);              <span class="comment">// 顶层变量</span></span><br><span class="line">            <span class="keyword">assert</span>(innerMain);             <span class="comment">// 主函数变量</span></span><br><span class="line">            <span class="keyword">assert</span>(insideFunc);            <span class="comment">// 外层变量</span></span><br><span class="line">            <span class="keyword">assert</span>(insideNestedFunction);  <span class="comment">// 局部变量</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> add1 = makeAdder(<span class="number">1</span>); <span class="comment">// 使用闭包</span></span><br><span class="line">    <span class="keyword">var</span> add2 = makeAdder(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span>(add1(<span class="number">3</span>) == <span class="number">4</span>);</span><br><span class="line">    <span class="keyword">assert</span>(add2(<span class="number">3</span>) == <span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/09/BHYJtP.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart函数</title>
    <link href="http://www.shieber.cn/title/7fe9af78/"/>
    <id>http://www.shieber.cn/title/7fe9af78/</id>
    <published>2020-11-08T15:24:48.000Z</published>
    <updated>2020-11-11T07:45:40.031Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/09/B7lTIS.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第九篇：函数。</p><p>函数是一组一起执行任务的语句，通过将这些语句组合起来形成一个独立单元有助于代码模块化管理、复用、审阅。函数是程序中的主体，是代码执行的逻辑单元。函数也有其他叫法，比如方法、例程、程序等。</p><p>函数存在声明和定义。声明就是告诉编译器函数的名称、返回类型和参数。而定义则提供了函数的实际主体，真正的代码存在于定义里面。</p><p>函数根据其开放原则可能被自身或其他函数调用。</p><h1 id="C函数"><a href="#C函数" class="headerlink" title="C函数"></a>C函数</h1><p>每个C程序都至少有一个主函数main()，主函数是程序执行的入口。程序还可以定义其他额外的函数，这些函数通过调用结合到一起，最后由main()函数驱动并执行。 C函数往往接收一些参数(parameters)进去，然后内部主体(body)执行，最后返回(return)。还可以将代码划分到不同的函数，划分函数是一门学问，但在逻辑上，通常是根据每个函数执行的特定任务来进行划分的。</p><p>C标准库提供了大量可供程序调用的内置函数，这些函数往往涉及到和操作系统打交道，是C语言的精粹。Linux平台下的glibc就是C标准库和系统调用的合集，所以又称运行时。</p><p>C语言中，函数的参数可能是变量值或变量地址，返回值也可能是值或地址。使用地址是因为有的变量太大，直接传递效率低，费内存。 函数的调用往往涉及到栈操作，调用者会入栈，保存参数和返回地址。被调用者执行时从栈取参数并执行，返回时取返回地址并返回。</p><p>C函数命名大小写均可，原则上都能被调用。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C函数的声明</span></span><br><span class="line"><span class="function">return_type <span class="title">function_name</span><span class="params">(parameters...)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;  <span class="comment">// 声明时要加;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// C函数的定义                             </span></span><br><span class="line">return_type function_name(parameters...)  function_name 函数名</span><br><span class="line">&#123;                                         parameters 调用参数</span><br><span class="line">    code_body                             code_body 执行的代码 </span><br><span class="line">&#125;                                         return_type 返回类型</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> num1, <span class="keyword">int</span> num2)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (num1 &gt; num2)</span><br><span class="line">        result = num1;</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        result = num2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num1, num2, result;</span><br><span class="line"></span><br><span class="line">    num1 = <span class="number">10</span>;</span><br><span class="line">    num2 = <span class="number">30</span>;</span><br><span class="line">    result = <span class="built_in">max</span>(num1, num2);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Python函数"><a href="#Python函数" class="headerlink" title="Python函数"></a>Python函数</h1><p>Python中函数有两种，一种的普通函数，一种时lambda函数，函数参数有普通参数、默认参数、收集参数、关键字参数、收集关键字参数。参数混合调用规则：普通参数、默认参数、关键字参数、收集参数、收集关键字参数依次放置。</p><p>以__开头的函数是私有函数，以__开头和结尾的方法是专有函数。</p><p>Python函数命名一般是下划线分割或驼峰法。Python函数内可以定义内部函数。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># Python函数的定义</span><br><span class="line">def function_name(parameter, *pargs, **kargs):</span><br><span class="line">    code_body</span><br><span class="line">    return_values   </span><br><span class="line"></span><br><span class="line"># 普通参数</span><br><span class="line">def max(num1, num2):</span><br><span class="line">    if num1 &gt; num2:</span><br><span class="line">        return num1</span><br><span class="line">    else:</span><br><span class="line">        return num2</span><br><span class="line"></span><br><span class="line"># 默认参数</span><br><span class="line">def student(name, age, gender=&apos;male&apos;):</span><br><span class="line">    if gender == &apos;male&apos;:</span><br><span class="line">        print(&quot;He is good&quot;)</span><br><span class="line">    else:</span><br><span class="line">        print(&quot;She is good&quot;)</span><br><span class="line"></span><br><span class="line"># 关键字参数</span><br><span class="line">def student(name=&apos;Tom&apos;, age=20, gender=&apos;male&apos;):</span><br><span class="line">    if gender == &apos;male&apos;:</span><br><span class="line">        print(&quot;%s is a student and he is %d years old&quot;%(name, age))</span><br><span class="line">    else:</span><br><span class="line">        print(&quot;%s is a student and she is %d years old&quot;%(name, age))</span><br><span class="line"></span><br><span class="line"># 收集参数</span><br><span class="line">def student(*args):</span><br><span class="line">    for param in args:</span><br><span class="line">        print(param)</span><br><span class="line"></span><br><span class="line"># 收集关键字参数</span><br><span class="line">def student(**kwargs):</span><br><span class="line">    for k, v in kwargs.items():</span><br><span class="line">        print(k, &apos;---&gt;&apos;, v)</span><br><span class="line"></span><br><span class="line"># Python lambda函数定义</span><br><span class="line">lambda [args[,arg2,...argn]]: expression</span><br><span class="line"></span><br><span class="line">x, y = 3, 2</span><br><span class="line">s = lambda x, y: x % y   # s = 1</span><br><span class="line"></span><br><span class="line">class MyClass:</span><br><span class="line">    #专有函数</span><br><span class="line">    def __init__(self,x):</span><br><span class="line">        self.x = x</span><br><span class="line"></span><br><span class="line">    #私有函数</span><br><span class="line">    def __setStr(self):</span><br><span class="line">        self.str = &quot;a&quot;</span><br></pre></td></tr></table></figure><h1 id="Go函数"><a href="#Go函数" class="headerlink" title="Go函数"></a>Go函数</h1><p>Go函数和C函数是类似的，都有返回值，函数名，参数，但Go中还有闭包和方法。Go函数依照其首字母的大小写来判定是否可导出，命名一般是驼峰法。Go函数内部可以定义并使用匿名函数。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Go函数定义</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">functionname</span><span class="params">(parameters)</span> <span class="title">return_types</span></span> &#123;</span><br><span class="line">    code_body</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Go函数实现，可外部引用Max</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Max</span><span class="params">(num1, num2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num1 &gt; num2 &#123;</span><br><span class="line">        result = num1</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = num2</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    result result</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 不可外部引用max</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(num1, num2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> num1 &gt; num2 &#123;</span><br><span class="line">        <span class="keyword">return</span> num1</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Go闭包，指外部值直接被go函数引用</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            fmt.Println(i*i) <span class="comment">// 闭包</span></span><br><span class="line">        &#125;()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span> i)</span></span> &#123;</span><br><span class="line">            fmt.Println(i*i)</span><br><span class="line">        &#125;(i) <span class="comment">// 非闭包</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Go方法，指一个包含了接受者的函数，接受者是类型、结构体的值或指针。所以给定类型的方法是该类型的方法集，相当于实现了一个类。</span></span><br><span class="line">PI = <span class="number">3.141592653</span>                           class Circle: #Python实现的Circle类</span><br><span class="line"><span class="keyword">type</span> Circle <span class="keyword">struct</span> &#123;                           def __init__(self, radius):</span><br><span class="line">    radius <span class="keyword">float64</span>                                 self.R = radius</span><br><span class="line">&#125;                                                  self.PI = <span class="number">3.141592653</span></span><br><span class="line">                                           </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Circle)</span> <span class="title">getDiameter</span><span class="params">()</span> <span class="title">float64</span></span> &#123;       def getDiameter(self):</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * c.radius                            <span class="keyword">return</span> <span class="number">2</span> * self.R</span><br><span class="line">&#125;                                          </span><br><span class="line">                                               def getPerimeter(self):</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Circle)</span> <span class="title">getPerimeter</span><span class="params">()</span> <span class="title">float64</span></span> &#123;          <span class="keyword">return</span> <span class="number">2</span> * self.PI * self.R</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * PI * c.radius               </span><br><span class="line">&#125;                                              def getArea(self):</span><br><span class="line">                                                       <span class="keyword">return</span> self.PI * self.R * self.R</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Circle)</span> <span class="title">getArea</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> PI * c.radius * c.radius</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Rust函数"><a href="#Rust函数" class="headerlink" title="Rust函数"></a>Rust函数</h1><p>Rust也有主函数main。Rust中一个模块中函数默认私有，要想导出供其他程序使用，需要加上pub关键字，命名多以以下划线分割。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Rust函数定义</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">func_name</span></span>(parameters) -&gt; return_types &#123;</span><br><span class="line">    code_body</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">max_func</span></span>(num1:<span class="built_in">i32</span>, num2:<span class="built_in">i32</span>) -&gt; <span class="built_in">i32</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">let</span> y = &#123;</span><br><span class="line">        <span class="keyword">let</span> x = <span class="number">3</span>;</span><br><span class="line">        x + <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num1 &gt; num2 &#123;</span><br><span class="line">        <span class="keyword">return</span> num1 + y;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num2 - y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> num1 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> num2 = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">let</span> res = max_func(num1, num2);</span><br><span class="line">    <span class="built_in">println!</span>(res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 公开模块</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">mod</span> a_public_module &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">func_1</span></span>() &#123; <span class="comment">// 公开函数</span></span><br><span class="line">        code_body;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">func_2</span></span>() &#123;     <span class="comment">// 私有函数</span></span><br><span class="line">        code_body;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Dart函数"><a href="#Dart函数" class="headerlink" title="Dart函数"></a>Dart函数</h1><p>Dart函数有main函数、lambda函数、闭包、内嵌函数(内部定义的函数)。参数包含无参数、位置参数(必须位置参数，可选位置参数，默认可选位置参数，{}表示)、命名参数（可选命名参数，默认可选命名参数，用{}表示）。</p><p>以_开头的函数私有，命名用大驼峰，小驼峰，下划线分割均可，但要统一。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Dart函数定义</span></span><br><span class="line">return_type function_name(parameters...) =&gt; expression;</span><br><span class="line">return_type function_name(parameters...) &#123;</span><br><span class="line">    code_body;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; arguments) &#123;</span><br><span class="line">    <span class="built_in">print</span>(arguments);</span><br><span class="line">    <span class="keyword">assert</span>(arguments.length == <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭包</span></span><br><span class="line"><span class="built_in">Function</span> makeAdder(<span class="built_in">num</span> addBy) &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">num</span> i) =&gt; addBy + i; <span class="comment">// lambda函数</span></span><br><span class="line">&#125;</span><br><span class="line">(<span class="built_in">num</span> x) =&gt; x;</span><br><span class="line">(<span class="built_in">num</span> x) &#123;<span class="keyword">return</span> x;&#125;</span><br><span class="line">(<span class="built_in">num</span> x, [<span class="built_in">int</span> step]) =&gt; x + setp;</span><br><span class="line">(<span class="built_in">num</span> x, &#123;<span class="built_in">int</span> step&#125;) =&gt; x + setp;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数使用</span></span><br><span class="line"><span class="built_in">String</span> getDefaultMsg() =&gt; <span class="string">"Unknown Error!"</span>; <span class="comment">// 无参数</span></span><br><span class="line"><span class="built_in">String</span> getErrorMsg(Exception e) =&gt; e.toString();  <span class="comment">// 必须位置参数</span></span><br><span class="line"><span class="built_in">String</span> getErrorMsg([<span class="built_in">String</span> e]) =&gt; e ?? <span class="string">"Unknown Error!"</span>;  <span class="comment">// 可选位置参数</span></span><br><span class="line"><span class="built_in">String</span> getErrorMsg([Exception exp], [<span class="built_in">String</span> e]) =&gt; <span class="string">"<span class="subst">$&#123;exp.toString()&#125;</span>--<span class="subst">$e</span>"</span>;  <span class="comment">// 混合参数</span></span><br><span class="line"><span class="built_in">num</span> add1(&#123;<span class="built_in">num</span> a, <span class="built_in">num</span> b, <span class="built_in">num</span> c&#125;) &#123; <span class="comment">// 命名参数</span></span><br><span class="line">    <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">num</span> add2(<span class="built_in">num</span> a,<span class="built_in">num</span> b, &#123;<span class="built_in">num</span> c, <span class="built_in">num</span> d&#125;) &#123; <span class="comment">// 可选命名参数位于后面</span></span><br><span class="line">    <span class="keyword">return</span> a + b + c + d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">num</span> add3(<span class="built_in">num</span> a, <span class="built_in">num</span> b, [<span class="built_in">num</span> c=<span class="number">5</span>]) &#123; <span class="comment">// 可选位置默认参数位于后面</span></span><br><span class="line">    <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">num</span> add3(<span class="built_in">num</span> a, <span class="built_in">num</span> b, <span class="built_in">num</span> c=<span class="number">5</span>) &#123; <span class="comment">// 可选命名默认参数位于后面</span></span><br><span class="line">    <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 顶层函数</span></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">    <span class="built_in">print</span>(add1(c:<span class="number">1</span>,a:<span class="number">2</span>,b:<span class="number">3</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 内嵌函数</span></span><br><span class="line"><span class="built_in">int</span> fibonacci(<span class="built_in">int</span> n) &#123;</span><br><span class="line">    <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; lastTwo(<span class="built_in">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> &lt;<span class="built_in">int</span>&gt;[<span class="number">0</span>,<span class="number">1</span>];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> p = lastTwo(n<span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">return</span> &lt;<span class="built_in">int</span>&gt;[p[<span class="number">1</span>],p[<span class="number">0</span>]+p[<span class="number">1</span>]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> lastTwo(n)[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">int</span> getValue() =&gt; <span class="number">100</span>;  <span class="comment">// 静态函数</span></span><br><span class="line">    <span class="built_in">String</span> _name; <span class="comment">// 私有变量</span></span><br><span class="line">    <span class="built_in">int</span> _age;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">void</span> PrintInfo() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">$&#123;<span class="keyword">this</span>._name&#125;</span>---<span class="subst">$&#123;<span class="keyword">this</span>._age&#125;</span>"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> _run() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"私有函数"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    execRun() &#123;</span><br><span class="line">        <span class="keyword">this</span>._run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/09/B7lTIS.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart控制原语</title>
    <link href="http://www.shieber.cn/title/5ad75c9d/"/>
    <id>http://www.shieber.cn/title/5ad75c9d/</id>
    <published>2020-11-08T13:02:25.000Z</published>
    <updated>2020-11-11T07:45:22.843Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/08/BTBsJI.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第八篇：流程控制原语。</p><p>流程控制原语，主要管理代码执行逻辑和路径，包括判断，跳转，循环，错误与异常。无论是面向对象还是面向过程，流程控制都必不可少。</p><h1 id="C流程控制原语-无错误处理"><a href="#C流程控制原语-无错误处理" class="headerlink" title="C流程控制原语[无错误处理]"></a>C流程控制原语[无错误处理]</h1><ul><li>if else </li><li>switch case</li><li>?:</li><li>for </li><li>while </li><li>do while </li><li>goto continue break</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">int main() </span><br><span class="line">&#123;</span><br><span class="line">    int num;</span><br><span class="line">    printf(&quot;Please enter a numer:&quot;);</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;num);</span><br><span class="line"></span><br><span class="line">    if (num &gt; 0) &#123;</span><br><span class="line">        printf(&quot;Greater than zero\n&quot;);</span><br><span class="line">    &#125;  </span><br><span class="line">    else if (num &lt; 0) &#123;</span><br><span class="line">        printf(&quot;Less than zero\n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        printf(&quot;Equal to zero\n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    switch (num) &#123;</span><br><span class="line">        case 0:</span><br><span class="line">            printf(&quot;Zero\n&quot;);</span><br><span class="line">            break;</span><br><span class="line">        case 1:</span><br><span class="line">            printf(&quot;One\n&quot;);</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            printf(&quot;Other&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    (num % 2 == 0) ? printf(&quot;Even\n&quot;):printf(&quot;Odd\n&quot;);</span><br><span class="line"></span><br><span class="line">    int i;</span><br><span class="line">    for (i = 0; i &lt; num; i++) &#123;</span><br><span class="line">        if (i % 2 == 0) &#123;</span><br><span class="line">            continue;</span><br><span class="line">        &#125;</span><br><span class="line">        printf(&quot;%d&quot;,i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    while (num &gt; 0) &#123;</span><br><span class="line">        printf(&quot;%d&quot;, 2*num--);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    do &#123;</span><br><span class="line">        printf(&quot;%d&quot;, 3*num++);</span><br><span class="line">    &#125; while (num &lt;= 0);</span><br><span class="line"></span><br><span class="line">    LOOP: if (num &lt; 10) &#123;</span><br><span class="line">        printf(&quot;%d&quot;, num++);</span><br><span class="line">        goto LOOP;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Python流程控制原语"><a href="#Python流程控制原语" class="headerlink" title="Python流程控制原语"></a>Python流程控制原语</h1><ul><li>if elif else</li><li>for in range</li><li>for else</li><li>while</li><li>while else</li><li>continue break pass </li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3 </span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line">num = int(input(<span class="string">"Please enter a numer:"</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> num &gt; <span class="number">0</span>:</span><br><span class="line">    print(<span class="string">"Greater than zero"</span>)</span><br><span class="line"><span class="keyword">elif</span> num &lt; <span class="number">0</span>:</span><br><span class="line">    print(<span class="string">"Less than zero"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"Equal to zero"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]:</span><br><span class="line">    print(i)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> num &lt; <span class="number">10</span>:</span><br><span class="line">    num += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> num &gt; <span class="number">8</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(num)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> num &gt; <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">if</span> num % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        num -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    print(<span class="number">2</span>*num)</span><br><span class="line">    num -= <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(num)</span><br></pre></td></tr></table></figure><h1 id="Go流程控制原语"><a href="#Go流程控制原语" class="headerlink" title="Go流程控制原语"></a>Go流程控制原语</h1><ul><li>if else</li><li>switch case default fallthrough</li><li>select case default</li><li>for</li><li>goto continue break</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span> </span><br><span class="line">    <span class="string">"os"</span> </span><br><span class="line">    <span class="string">"strconv"</span> </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> n stirng</span><br><span class="line">    fmt.Print(<span class="string">"Please enter a numer:"</span>)</span><br><span class="line">    fmt.Scanln(&amp;n)</span><br><span class="line"></span><br><span class="line">    num, err := strconv.Atoi(n)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        e = errors.New(<span class="string">"convert error"</span>)</span><br><span class="line">        fmt.Println(e)</span><br><span class="line">        os.Exit(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> num &gt; <span class="number">0</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"Greater than zero"</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> num &lt; <span class="number">0</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"Less than zero"</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"Equal to zero\n"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> num &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            fmt.Println(<span class="string">"Zero"</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            fmt.Println(<span class="string">"One"</span>)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            fmt.Println(<span class="string">"Other"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> nums <span class="keyword">interface</span>&#123;&#125; = num</span><br><span class="line">    <span class="keyword">switch</span> nums.(<span class="keyword">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="literal">nil</span>:</span><br><span class="line">            fmt.Println(<span class="string">"Nil"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">int</span>:</span><br><span class="line">            fmt.Println(<span class="string">"Int"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">float64</span>:</span><br><span class="line">            fmt.Println(<span class="string">"Float64"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">bool</span>, <span class="keyword">string</span>:</span><br><span class="line">            fmt.Println(<span class="string">"Bool or String"</span>)</span><br><span class="line">            <span class="keyword">fallthrough</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            fmt.Println(<span class="string">"Unknown"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> c1, c2 <span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">select</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> &lt;- c1:</span><br><span class="line">            fmt.Println(<span class="string">"Recieved c1"</span>)</span><br><span class="line">        <span class="keyword">case</span> &lt;- c2:</span><br><span class="line">            fmt.Println(<span class="string">"Recieved c2"</span>)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            fmt.Println(<span class="string">"Not recieved"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; num; i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Println(i)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span>([]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;) &#123;</span><br><span class="line">        fmt.Println(v)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> num &lt;= <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Println(<span class="number">2</span>*num)</span><br><span class="line">        num--</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    LOOP: <span class="keyword">if</span> num &lt; <span class="number">10</span> &#123;</span><br><span class="line">        fmt.Println(num)</span><br><span class="line">        num++</span><br><span class="line">        <span class="keyword">goto</span> LOOP</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Rust流程控制原语"><a href="#Rust流程控制原语" class="headerlink" title="Rust流程控制原语"></a>Rust流程控制原语</h1><ul><li>if else</li><li>for in</li><li>while</li><li>loop break</li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::io;</span><br><span class="line"><span class="keyword">use</span> std::fs::File;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> line = <span class="built_in">String</span>::new();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"Please enter a numer:"</span>);</span><br><span class="line">    <span class="keyword">let</span> _ = io::stdin()</span><br><span class="line">        .read_line(&amp;<span class="keyword">mut</span> line)</span><br><span class="line">        .unwrap();</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> num:<span class="built_in">i32</span> = line</span><br><span class="line">        .trim()</span><br><span class="line">        .parse::&lt;<span class="built_in">i32</span>&gt;()</span><br><span class="line">        .unwrap(); </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num &gt; <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"Greater than zero"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> num &lt; <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"Less than zero"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"Equal to zero"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..num &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> num &gt; <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="number">2</span>*num);</span><br><span class="line">        num -= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> num &gt; <span class="number">10</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>,num);</span><br><span class="line">        num += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Dart流程控制原语"><a href="#Dart流程控制原语" class="headerlink" title="Dart流程控制原语"></a>Dart流程控制原语</h1><ul><li>if else</li><li>switch case default</li><li>for</li><li>for in </li><li>while</li><li>do while</li><li>continue break</li><li>?: ?? ??=</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"dart:io"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() </span><br><span class="line">&#123;</span><br><span class="line">    stdout.write(<span class="string">"Please enter a numer:"</span>);</span><br><span class="line">    <span class="keyword">var</span> line = stdin.readLineSync();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">num</span> = <span class="built_in">int</span>.parse(line);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">num</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Greater than zero"</span>);</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">num</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Less than zero"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Equal to zero"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (<span class="built_in">num</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"Zero"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"One"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">default</span>: &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"Other"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">num</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">$&#123;i&#125;</span>"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">num</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="number">2</span>*i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> obj = <span class="keyword">const</span>[<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> prop <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="built_in">print</span>(prop);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">num</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="number">2</span>*<span class="built_in">num</span>);</span><br><span class="line">        <span class="built_in">num</span> -= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">num</span>);</span><br><span class="line">        <span class="built_in">num</span> += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">num</span> &lt; <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    LOOP1: </span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">num</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">num</span>);</span><br><span class="line">        <span class="built_in">num</span> += <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">break</span> LOOP1;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    LOOP2:</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">num</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">3</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span> LOOP2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">print</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> res = <span class="built_in">num</span> &gt; <span class="number">0</span> ? <span class="string">"greater"</span>:<span class="string">"less or equal"</span>;</span><br><span class="line">    <span class="built_in">print</span>(res);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">num</span> ??= <span class="number">1</span>; </span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">num</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> y = <span class="built_in">num</span> ?? <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">print</span>(y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/08/BTBsJI.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart运算符</title>
    <link href="http://www.shieber.cn/title/ed051314/"/>
    <id>http://www.shieber.cn/title/ed051314/</id>
    <published>2020-11-07T12:37:03.000Z</published>
    <updated>2020-11-11T07:21:34.600Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/07/BIFNv9.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第七篇：运算符。</p><p>运算符是一种告诉编译器/解释器执行特定数学，逻辑，关系等操作的符号。</p><h1 id="C运算符"><a href="#C运算符" class="headerlink" title="C运算符"></a>C运算符</h1><ul><li>算术运算符 [+ - * / % ++ –]</li><li>关系运算符 [== != &gt; &gt;= &lt; &lt;=]</li><li>逻辑运算符 [&amp;&amp; || !]</li><li>位运算符是 [&amp; | ^ &lt;&lt; &gt;&gt;]</li><li>赋值运算符 [= += -= *= /= %= &lt;&lt;= &gt;&gt;= &amp;= |= ^=]</li><li>其他运算符 [sizeof  &amp;(取址)  *(取值)  ?:]</li></ul><h1 id="Python运算符"><a href="#Python运算符" class="headerlink" title="Python运算符"></a>Python运算符</h1><ul><li>算术运算符 [+ - * / % // **]</li><li>关系运算符 [== != &gt; &gt;= &lt; &lt;=]</li><li>逻辑运算符 [and or not]</li><li>位运算符是 [&amp; | ^ ~ &lt;&lt; &gt;&gt;]</li><li>赋值运算符 [= := += -= *= /= %= **= //= &lt;&lt;= &gt;&gt;= &amp;= |= ^=]</li><li>其他运算符 [is, is not,  in, not in]]</li></ul><h1 id="Go运算符"><a href="#Go运算符" class="headerlink" title="Go运算符"></a>Go运算符</h1><ul><li>算术运算符 [+ - * / % ++ –]</li><li>关系运算符 [== != &gt; &gt;= &lt; &lt;=]</li><li>逻辑运算符 [&amp;&amp; || !]</li><li>位运算符是 [&amp; | ^ &lt;&lt; &gt;&gt;]</li><li>赋值运算符 [= += -= *= /= %= &lt;&lt;= &gt;&gt;= &amp;= |= ^=]</li><li>其他运算符 [&amp;(取址)  *(取值)]</li></ul><h1 id="Rust运算符"><a href="#Rust运算符" class="headerlink" title="Rust运算符"></a>Rust运算符</h1><ul><li>算术运算符 [+ - * / %]</li><li>关系运算符 [== != &gt; &gt;= &lt; &lt;=]</li><li>逻辑运算符 [&amp;&amp; || !]</li><li>位运算符是 [&amp; | ^ &lt;&lt; &gt;&gt;]</li><li>赋值运算符 [= += -= *= /= %= &lt;&lt;= &gt;&gt;= &amp;= |= ^=]</li><li>其他运算符 [-(取负) !(取反) &amp;(租借)  *(取值/指针) -&gt; 函数闭包 ?(错误) as(类型转换)]</li></ul><h1 id="Dart运算符"><a href="#Dart运算符" class="headerlink" title="Dart运算符"></a>Dart运算符</h1><ul><li>算术运算符 [+ - * / ~/ %]</li><li>关系运算符 [== != &gt; &gt;= &lt; &lt;=]</li><li>逻辑运算符 [&amp;&amp; || !]</li><li>位运算符是 [&amp; | ^ ~ &lt;&lt; &gt;&gt;]</li><li>赋值运算符 [= += -= *= /= ~/= %= ??= &lt;&lt;= &gt;&gt;= &amp;= |= ^=]</li><li>其他运算符 [-(取负) as is is! . ?: ?? ?. ..]</li></ul><h1 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h1><p>对比发现，下面这些运算符是所有语言都有的，且用法也一样。</p><ul><li>算术运算符 [+ - * / %]</li><li>关系运算符 [== != &gt; &gt;= &lt; &lt;=]</li><li>逻辑运算符 [&amp;&amp; || !]</li><li>位运算符是 [&amp; | ^ &lt;&lt; &gt;&gt;]</li><li>赋值运算符 [= += -= *= /= %= &lt;&lt;= &gt;&gt;= &amp;= |= ^=]</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// operators.c C中使用运算符 </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> c1, c2, c3, c4, c5, c6 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    c1 = a + b;</span><br><span class="line">    c2 = a - b;</span><br><span class="line">    c3 = a * b;</span><br><span class="line">    c4 = b / a;</span><br><span class="line">    c5 = a % b;</span><br><span class="line">    c6 += c5;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (a == b) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"a == b\n"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"a != b\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> !a &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"false\n"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"ture\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> b &gt; <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a&lt;&lt;<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, b&lt;&lt;<span class="number">1</span>);</span><br><span class="line">        a *= <span class="number">2</span>;</span><br><span class="line">        b -= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (c1 &amp;&amp; c2) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"ture\n"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"false\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, c3 &lt;&lt; <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, c4 &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, c4 &amp; c5);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, c5 | c6);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, c5 ^ c6);</span><br><span class="line"></span><br><span class="line">    c6 &amp;= c5;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, c6);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/07/BIFNv9.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart常量和变量</title>
    <link href="http://www.shieber.cn/title/bf474c89/"/>
    <id>http://www.shieber.cn/title/bf474c89/</id>
    <published>2020-11-07T08:22:04.000Z</published>
    <updated>2020-11-11T07:22:25.480Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/08/Bo6QFH.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第六篇：常量和变量。</p><p>编程语言中的量是一种表述和存储模型，它表征了某个对象或事物在内存中的保存和使用方式。这些量即有值又有类型。常量就是值和类型均不能变的量，相反，变量的值可以变，但类型不可变，除非重定义。</p><h1 id="C常量和变量"><a href="#C常量和变量" class="headerlink" title="C常量和变量"></a>C常量和变量</h1><p>C中常量</p><ul><li>define 定义</li><li>const 定义</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常量定义方式</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> G 9.8   <span class="comment">// 没有;号</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">54</span>;</span><br></pre></td></tr></table></figure><p>C中变量</p><ul><li>type variable 定义方式1</li><li>type variable = value 定义方式2</li><li>type variable1, variable2 定义方式3</li><li>type variable1 = value1, variable2 = value2 定义方式4</li><li>extern type variable 定义方式5</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C中变量类型</span></span><br><span class="line"><span class="keyword">char</span> <span class="keyword">int</span> <span class="keyword">float</span> <span class="keyword">double</span></span><br><span class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">struct</span> <span class="title">union</span></span></span><br><span class="line"><span class="class"><span class="title">array</span></span></span><br><span class="line"><span class="class"><span class="title">pointer</span></span></span><br><span class="line"><span class="class"><span class="title">void</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// <span class="title">C</span>变量定义及初始化</span></span><br><span class="line"><span class="class"><span class="title">int</span> <span class="title">i</span>;</span></span><br><span class="line"><span class="keyword">int</span> i, j, k;</span><br><span class="line"><span class="keyword">int</span> c = <span class="number">3</span>, d = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">char</span> l = <span class="string">"s"</span>;</span><br><span class="line"><span class="keyword">float</span> m = <span class="number">2.0</span>;</span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> T;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> WEEK&#123; MON = <span class="number">1</span>,Tue,Wed,Thu,Fri,Sat,Sun&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">char</span> b;</span><br><span class="line">    <span class="keyword">double</span> c;</span><br><span class="line">&#125;s1;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Books</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> title[<span class="number">50</span>];</span><br><span class="line">    <span class="keyword">char</span> author[<span class="number">50</span>];</span><br><span class="line">    <span class="keyword">char</span> subject[<span class="number">50</span>];</span><br><span class="line">    <span class="keyword">int</span> book_id;</span><br><span class="line">&#125;k1;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Books</span> <span class="title">t1</span>, <span class="title">t2</span>[20], *<span class="title">t3</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">char</span> b;</span><br><span class="line">    <span class="keyword">double</span> c;</span><br><span class="line">&#125;Simple;</span><br><span class="line">Simple u1, u2[<span class="number">20</span>], *u3;</span><br><span class="line"></span><br><span class="line">unio Data &#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">float</span> f;</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">20</span>];</span><br><span class="line">&#125;data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">union</span> Data newData; <span class="comment">// 一次最好只使用一个变量</span></span><br><span class="line">newData.i = <span class="number">10</span>;</span><br><span class="line">newData.f = <span class="number">12.5</span>;</span><br><span class="line"><span class="built_in">strcpy</span>(newData.str <span class="string">"C programming"</span>);</span><br></pre></td></tr></table></figure><h1 id="Python常量和变量"><a href="#Python常量和变量" class="headerlink" title="Python常量和变量"></a>Python常量和变量</h1><p>Python中并没有C中那种命名常量，一切都看使用形式。数字、字符串、布尔值、空值等都是常量。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 常量定义方式</span><br><span class="line">PI = <span class="number">3.141592653</span></span><br><span class="line">NAME = <span class="string">"Shieber"</span></span><br><span class="line">YES = <span class="literal">True</span></span><br><span class="line">RESULT = <span class="literal">None</span></span><br><span class="line">PERSON = (<span class="string">"Shieber"</span>, <span class="number">24</span>, <span class="number">172</span>)</span><br><span class="line"></span><br><span class="line">// 变量定义方式</span><br><span class="line">age = <span class="number">24</span></span><br><span class="line">name = [<span class="string">"Shieber"</span>,<span class="string">"Kew"</span>,<span class="string">"Kim"</span>]</span><br><span class="line">dics = &#123;<span class="string">"a"</span>:<span class="number">1</span>,<span class="string">"b"</span>:<span class="number">2</span>,<span class="string">"c"</span>:<span class="number">3</span>&#125;</span><br><span class="line">sets = &#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>&#125;</span><br></pre></td></tr></table></figure><h1 id="Go常量和变量"><a href="#Go常量和变量" class="headerlink" title="Go常量和变量"></a>Go常量和变量</h1><p>Go中基本变量包括布尔型，数字型，字符串，它的定义和C一样使用const。</p><p>Go中常量</p><ul><li>const 定义</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常量定义方式</span></span><br><span class="line"><span class="keyword">const</span> i <span class="keyword">int</span> = <span class="number">100</span></span><br><span class="line"><span class="keyword">const</span> y <span class="keyword">bool</span> = <span class="literal">true</span></span><br><span class="line"><span class="keyword">const</span> b <span class="keyword">string</span> = <span class="string">"abc"</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">"abc"</span></span><br><span class="line"><span class="keyword">const</span> a, b = <span class="string">"a"</span>, <span class="string">"b"</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="literal">iota</span>      <span class="comment">// 0</span></span><br><span class="line">    b             <span class="comment">// 1</span></span><br><span class="line">    _             <span class="comment">// 2</span></span><br><span class="line">    d             <span class="comment">// 3</span></span><br><span class="line">    e = <span class="number">1</span> &lt;&lt; <span class="literal">iota</span> <span class="comment">// 16</span></span><br><span class="line">    f             <span class="comment">// 32 </span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>Go中变量</p><ul><li>var定义</li><li>:= 定义</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 变量定义方式</span></span><br><span class="line"><span class="keyword">var</span> a <span class="keyword">int</span></span><br><span class="line">a = <span class="number">100</span></span><br><span class="line"><span class="keyword">var</span> bar [<span class="number">10</span>]<span class="keyword">float32</span></span><br><span class="line">baz := [...]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> m <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>      <span class="comment">//映射</span></span><br><span class="line">m = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">n := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>, <span class="number">30</span>)  <span class="comment">//切片</span></span><br><span class="line">q := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">10</span>)   <span class="comment">//通道</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">struct</span> person &#123;</span><br><span class="line">    Name: <span class="keyword">string</span></span><br><span class="line">    Gender: <span class="keyword">string</span></span><br><span class="line">    Age: <span class="keyword">int</span></span><br><span class="line">    Address: <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p := person&#123;</span><br><span class="line">    Name: <span class="string">"Shieber"</span>,</span><br><span class="line">    Gender: <span class="string">"Male"</span>,</span><br><span class="line">    Age: <span class="number">24</span>,</span><br><span class="line">    Address: <span class="string">"CD"</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c, d, e <span class="keyword">int</span></span><br><span class="line">c, d, e = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c, d, e  = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br><span class="line">c, d, e := <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">"Shieber"</span></span><br><span class="line"><span class="keyword">var</span> s <span class="keyword">string</span> = <span class="string">"Shieber"</span></span><br><span class="line"></span><br><span class="line">s := <span class="string">"Shieber"</span></span><br></pre></td></tr></table></figure><h1 id="Rust常量和变量"><a href="#Rust常量和变量" class="headerlink" title="Rust常量和变量"></a>Rust常量和变量</h1><p>Rust中常量定义和C中相似，只是Rust加入了生命周期概念。</p><p>Rust中常量</p><ul><li>const 定义常量，类似C中#define </li><li>static 定义全局变量，可当常量使用</li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> AGE:<span class="built_in">i32</span> = <span class="number">24</span>;</span><br><span class="line"><span class="keyword">const</span> NUM:<span class="built_in">f64</span> = <span class="number">3.0</span>;</span><br><span class="line"><span class="keyword">const</span> NUMS:[<span class="built_in">i32</span>:<span class="number">4</span>] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> NAME:<span class="built_in">String</span> = <span class="string">"Shieber"</span></span><br></pre></td></tr></table></figure><p>Rust中变量</p><ul><li>let 定义，值不能变，但变量能重定义</li><li>let mut 定义，值能变，变量也能重定义</li><li>static mut 定义，静态变量，但值可变</li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 变量定义方式</span></span><br><span class="line"><span class="keyword">let</span> x:<span class="built_in">f64</span> = <span class="number">3.14</span>;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">6.28</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> z = <span class="number">70000</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> k: int64 = <span class="number">70000</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">mut</span> NUM:<span class="built_in">i32</span> = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">unsafe</span> &#123;</span><br><span class="line">    NUM += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"Num:&#123;&#125;"</span>,NUM);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Dart常量和变量"><a href="#Dart常量和变量" class="headerlink" title="Dart常量和变量"></a>Dart常量和变量</h1><p>Dart中常量</p><ul><li>const  定义并赋值</li><li>final  定义时可不赋值，但只能赋值一次</li></ul><p>final和const区别：final修饰的是变量，定义时可不赋值，但初始化赋值只能一次，之后就不再变，类似常量。而const一开始修饰的就必须是常量，且必须初始化。final用时才申请内存，const一开始就处理好了，所以速度要快些。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PI = <span class="number">3.141592653</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">double</span> F = <span class="number">2.0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="built_in">int</span> A; <span class="comment">//未初始化</span></span><br><span class="line">A = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> C = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">final</span> <span class="built_in">String</span> NAME = <span class="string">'Shieber'</span>; <span class="comment">// 可以加上类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> bar = <span class="keyword">const</span>[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> baz = <span class="keyword">const</span>[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> x; <span class="comment">// 内部变量必须是final，因为类型不定</span></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> y;</span><br><span class="line">    <span class="keyword">const</span> Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y); <span class="comment">// 返回必须是const</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Dart中变量</p><ul><li>var 定义</li><li>dynamic 定义，类型可变</li><li>type variable  定义</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'Shieber'</span>; <span class="comment">// 自动推导类型</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">dynamic</span> str = <span class="string">'Shieber'</span>;</span><br><span class="line">str = <span class="number">20</span>;            <span class="comment">// dynamic变量的类型可改变</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span> str = <span class="string">'Shieber'</span>;</span><br><span class="line"><span class="built_in">String</span> s = <span class="string">'''</span></span><br><span class="line"><span class="string">Hello</span></span><br><span class="line"><span class="string">Dart</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> y = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">int</span> str = <span class="number">100</span>;</span><br><span class="line"><span class="built_in">double</span> c = <span class="number">2.0</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">List</span> l1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> l2 = <span class="keyword">const</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// const 可构造变量, l2可修改</span></span><br><span class="line"><span class="built_in">List</span> l3 =  <span class="keyword">new</span> <span class="built_in">List</span>();</span><br><span class="line">l3.add(<span class="string">'z'</span>);</span><br><span class="line">l3.add(<span class="string">'k'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Map</span> m1 = &#123;</span><br><span class="line">    <span class="string">'Name'</span>: <span class="string">'Shieber'</span>,</span><br><span class="line">    <span class="string">'Age'</span>: <span class="number">24</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Map</span> m2 = <span class="keyword">const</span>&#123;</span><br><span class="line">    <span class="string">'Name'</span>: <span class="string">'Shieber'</span>,</span><br><span class="line">    <span class="string">'Age'</span>: <span class="number">24</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Map</span> m3 = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">m3[<span class="string">'Name'</span>] = <span class="string">'Shieber'</span>;</span><br><span class="line">m3[<span class="string">'Age'</span>] = <span class="number">24</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/08/Bo6QFH.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart数据类型及其转换</title>
    <link href="http://www.shieber.cn/title/6a4fc2a2/"/>
    <id>http://www.shieber.cn/title/6a4fc2a2/</id>
    <published>2020-11-07T03:23:55.000Z</published>
    <updated>2020-11-11T07:20:47.408Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/07/B5B37R.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第五篇：数据类型及其转换规则。</p><h1 id="C语言数据类型"><a href="#C语言数据类型" class="headerlink" title="C语言数据类型"></a>C语言数据类型</h1><p>因为C是底层语言，所以它的数据类型偏底层，和内存联系在一起。</p><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p><strong>基本类型</strong></p><ul><li>字符类型 char  </li><li>数值类型 [signed/unsigned] short int long float double </li></ul><p><strong>派生类型</strong>  </p><ul><li>枚举体型 enum  </li><li>结构体型 struct  </li><li>联合体型 union  </li><li>数组类型 array  </li><li>函数类型 function </li></ul><p><strong>指针类型</strong></p><ul><li>指针类型 pointer </li></ul><p><strong>空类型</strong></p><ul><li>空类型 void</li></ul><h3 id="类型转变"><a href="#类型转变" class="headerlink" title="类型转变"></a>类型转变</h3><p>C语言中的数值数据会因为所处的代码上下文环境而发生类型转变，如降级，提升。</p><p>以下是C语言中数据类型转换的基本规则：</p><ul><li>强制转换格式为 (类型名) (表达式)</li><li>在表达式中，参与运算的量的类型不同时会转换为同一类型</li><li>在表达式中，有符号和无符号的char和short类型将自动转换为int</li><li>在包含两种数据类型的任何运算中，较低级别类型会转为较高级别的数据类型</li><li>赋值语句中结果将转换为被赋值量类型，可能级别提升或者降级，提升无损，降级可能丢失数据</li><li>函数参数传递时，char和short转为int，float转为double，可通过函数原型指定以阻止提升的发生</li><li>数据类型级别高低顺序是long double、double、float、usigned long、long、unsigned int、int，当long和int具有相同大小时，unsigned int级别高于long</li></ul><h1 id="Python数据类型"><a href="#Python数据类型" class="headerlink" title="Python数据类型"></a>Python数据类型</h1><p>Python作为动态语言，数据分可变与否，偏实用。</p><h3 id="数据类型-1"><a href="#数据类型-1" class="headerlink" title="数据类型"></a>数据类型</h3><p><strong>不可变类型</strong>    </p><ul><li>布尔类型 bool</li><li>字符串型 string    </li><li>元组类型 tuple   </li><li>数值类型 number [int float complex]  </li></ul><p><strong>可变类型</strong>  </p><ul><li>列表类型 list  </li><li>字典类型 dict  </li><li>集合类型 set   </li></ul><h3 id="数据类型转变"><a href="#数据类型转变" class="headerlink" title="数据类型转变"></a>数据类型转变</h3><p>Python支持的数值类型有整型int、浮点型float、复数型complex。但Python中，数据类型不会自动转换，有需要时，要自己调用相应函数实现转换。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">""</span>.join(lst)</span><br><span class="line"><span class="string">'123'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'3'</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>float(<span class="string">'3'</span>)</span><br><span class="line"><span class="number">3.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>complex(<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line">(<span class="number">3</span>+<span class="number">1j</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str(<span class="number">3</span>)</span><br><span class="line"><span class="string">'3'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tuple(lst)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(<span class="string">'123'</span>)</span><br><span class="line">[<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'3'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>chr(<span class="number">97</span>)</span><br><span class="line"><span class="string">'a'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ord(<span class="string">'a'</span>)</span><br><span class="line"><span class="number">97</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hex(<span class="number">21</span>)</span><br><span class="line"><span class="string">'0x15'</span></span><br><span class="line">&gt;&gt; oct(<span class="number">21</span>)</span><br><span class="line"><span class="string">'0o25'</span></span><br></pre></td></tr></table></figure><p>具体转换规则如下图:</p><p><img src="https://s1.ax1x.com/2020/11/10/BqWWKe.png" alt="data2p"></p><h1 id="Go数据类型"><a href="#Go数据类型" class="headerlink" title="Go数据类型"></a>Go数据类型</h1><p>Go作为网络时代的C，其数据类型中既有偏底层的，又有偏实用的，其中有一些是Go特有的。</p><h3 id="数据类型-2"><a href="#数据类型-2" class="headerlink" title="数据类型"></a>数据类型</h3><p><strong>基本类型</strong>  </p><ul><li>布尔类型 bool</li><li>码点类型 rune</li><li>字符及串 byte string  </li><li>数值类型 (u)int(8,16,32,64) float(32,64) complex  </li></ul><p><strong>派生类型</strong>  </p><ul><li>指针类型 pt := &amp;v (nil)  </li><li>数组类型 nu := [4]int{0,1,2,3}   </li><li>切片类型 sl := []int{0,1,2,3,}  </li><li>映射类型 mp := make(map[string]string)  </li><li>结构类型 type Employee struct {}  </li><li>管道类型 ch := make(chan int, 2)  </li><li>接口类型 func (p *Ptr) getName() string{}  </li><li>函数类型 func sayHello(name strin){}  </li></ul><h3 id="数据类型转变-1"><a href="#数据类型转变-1" class="headerlink" title="数据类型转变"></a>数据类型转变</h3><p>GO中数据类型一般需要显式转换，但一些底层有着相同类型的数据也会隐式转换。</p><ul><li><code>byte</code> 和 <code>uint8</code></li><li><code>rune</code> 和 <code>int32</code></li><li><code>[]byte</code> 和 <code>[]uint8</code></li><li>转换规则是 <code>(T) (x)</code>。</li></ul><p>对于接口类型，可通过断言转换为对应类型。而所有unsafe pointer都是unsafe.Pointer类型。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> b <span class="keyword">interface</span>&#123;&#125; = a</span><br><span class="line"></span><br><span class="line">c := b.(<span class="keyword">int</span>) <span class="comment">// c是int型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> count <span class="keyword">int</span> = <span class="number">5</span></span><br><span class="line">mean := <span class="keyword">float32</span>(sum) / <span class="keyword">float32</span>(count)</span><br></pre></td></tr></table></figure><h1 id="Rust数据类型"><a href="#Rust数据类型" class="headerlink" title="Rust数据类型"></a>Rust数据类型</h1><p>Rust面向底层，数据类型和C很像，但又有些数据类型和Go相似。</p><h3 id="数据类型-3"><a href="#数据类型-3" class="headerlink" title="数据类型"></a>数据类型</h3><p><strong>标量类型</strong></p><ul><li>布尔类型 bool</li><li>字符类型 char  </li><li>数值类型 u|i(8/16/32/64/128/size)  f32(64)  </li></ul><p><strong>复合类型</strong></p><ul><li>元组类型 tuple</li><li>数组类型 array</li><li>切片类型 slice</li><li>结构体型 struct</li><li>枚举类型 enum</li><li>泛型类型 generics [trait]</li></ul><h3 id="数据类型转变-2"><a href="#数据类型转变-2" class="headerlink" title="数据类型转变"></a>数据类型转变</h3><p>Rust不提供原生类型之间的隐式类型转换，但可使用as关键字显式类型转换。整型之间的转换大体使用且遵循C语言惯例，在Rust中所有整型转换都是定义良好的。as只能用于i64 i32 f64 f32 u32 u8 char类型。</p><p>Rust内部对于Struce和Enum的类型转换提供了From和Into两个trait，实现From会默认实现Into。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="class"><span class="keyword">trait</span> <span class="title">From</span></span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">from</span></span>&lt;T&gt; -&gt; <span class="keyword">Self</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">pub</span> <span class="class"><span class="keyword">trait</span> <span class="title">Info</span></span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">into</span></span>&lt;T&gt; -&gt; T;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#![allow(overflowing_literals)]</span>  <span class="comment">// 忽略类型转换的溢出警告</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> decimal = <span class="number">61.3214_f32</span>;</span><br><span class="line">    <span class="keyword">let</span> integer: <span class="built_in">u8</span> = decimal;   <span class="comment">// 此行错误，默认不能将f32转为u8</span></span><br><span class="line">    <span class="keyword">let</span> integer = decimal <span class="keyword">as</span> <span class="built_in">u8</span>; <span class="comment">// 正确，as转换</span></span><br><span class="line">    <span class="keyword">let</span> character = integer <span class="keyword">as</span> <span class="built_in">char</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"1000 as a u16 is: &#123;&#125;"</span>, <span class="number">1000</span> <span class="keyword">as</span> <span class="built_in">u16</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"1000 as a u8 is: &#123;&#125;"</span>, <span class="number">1000</span> <span class="keyword">as</span> <span class="built_in">u8</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">#[derive(Debug)]</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Complex</span></span> &#123;</span><br><span class="line">        re: <span class="built_in">i32</span>,</span><br><span class="line">        im: <span class="built_in">i32</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">impl</span> <span class="built_in">From</span>&lt;<span class="built_in">i32</span>&gt; <span class="keyword">for</span> Complex &#123;</span><br><span class="line">        <span class="function"><span class="keyword">fn</span> <span class="title">from</span></span>(re: <span class="built_in">i32</span>) -&gt; <span class="keyword">Self</span> &#123;</span><br><span class="line">            Complex &#123;</span><br><span class="line">                re,</span><br><span class="line">                im:<span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Dart数据类型"><a href="#Dart数据类型" class="headerlink" title="Dart数据类型"></a>Dart数据类型</h1><p>Dart即可看成动态，又可看成静态语言，数据类型丰富。</p><h3 id="数据类型-4"><a href="#数据类型-4" class="headerlink" title="数据类型"></a>数据类型</h3><p><strong>基本类型</strong></p><ul><li>布尔类型 bool</li><li>字符串型 String</li><li>码点类型 rune </li><li>符号类型 Symbol</li><li>数值类型 num int double</li></ul><p><strong>集合类型</strong></p><ul><li>列表类型 List</li><li>映射类型 Map</li><li>集合类型 Set</li><li>队列类型 Queue</li><li>枚举类型 enum</li></ul><p><strong>动态类型</strong></p><ul><li>动态类型 dynamic</li></ul><h3 id="数据类型转变-3"><a href="#数据类型转变-3" class="headerlink" title="数据类型转变"></a>数据类型转变</h3><p>Dart不提供隐式转换，所有类型转换需要显式执行。</p><ul><li>toXtype</li><li>parse(Xtype)</li><li>as</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">    age.toString();</span><br><span class="line">    <span class="built_in">int</span>.parse(<span class="string">"100"</span>);</span><br><span class="line">    <span class="keyword">var</span> oneP = <span class="built_in">double</span>.parse(<span class="string">"1.1"</span>);</span><br><span class="line">    <span class="built_in">String</span> pi = <span class="number">3.1415926</span>.toStringAsFixed(<span class="number">3</span>)</span><br><span class="line">    </span><br><span class="line">    (emp <span class="keyword">as</span> Person).firstName = <span class="string">"Tim"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="类型对比"><a href="#类型对比" class="headerlink" title="类型对比"></a>类型对比</h1><ul><li>Go和Dart共有码点(rune)类型</li><li>C和Rust与Dart共有枚举(enum)类型</li><li>Python和Rust共有元组(tuple)类型</li><li>Python和Dart共有列表(list)，集合(set)和映射(map)类型</li><li>Go独有通道(channel)和接口(interface)类型</li><li>Dart独有符号(Symbol)，队列(queue)，动态(dynamic)类型</li><li>各种语言都或多或少存在指针(*&amp;)，引用的使用</li></ul><p>布尔型，字符型，数值型，数组型几乎是各语言共有的类型，这说明此四类型是基础，重中之重。基于这些类型，各语言构造了不同用途的复杂数据结构。</p><p>学习时，要先从基础类型学，然后学习各语言衍生的复杂结构，最后总结。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/07/B5B37R.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart程序规则和工具</title>
    <link href="http://www.shieber.cn/title/2e9fe2ee/"/>
    <id>http://www.shieber.cn/title/2e9fe2ee/</id>
    <published>2020-11-07T01:58:08.000Z</published>
    <updated>2020-11-11T07:20:07.192Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/07/B50NLj.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第四篇：程序规则和工具。</p><p>程序中包含的基本要素(不同语言包含的元素不完全一样，只是大体上一样)</p><ul><li>库/包/头文件</li><li>变量</li><li>语句/表达式</li><li>控制流程</li><li>函数</li><li>类/接口</li><li>标签</li><li>注释</li></ul><p>标识符是程序中元素的名称，如变量，函数等。五种语言标识符的规则是一样的：</p><ul><li>标识符不能是关键字</li><li>标识符可以包括字符和数字，不能以数字开头</li><li>除下划线_或美元符号$外，不能包含特殊符号</li><li>标识符必须是唯一的，标识符区分大小写，不能包含空格</li></ul><p>各语言分割符，注释方式，括号/缩进，格式化，文档，包管理，测试，工程的区别如下</p><table><thead><tr><th align="center">语言</th><th align="center">分割符</th><th align="center">注释方式</th><th align="center">括号/缩进</th><th align="center">格式化</th><th align="center">文档</th><th align="center">包管理</th><th align="center">测试</th><th align="center">工程工具</th></tr></thead><tbody><tr><td align="center">C</td><td align="center">;</td><td align="center"><code>// /**/</code></td><td align="center">{ 可换行</td><td align="center">无</td><td align="center">无</td><td align="center">无</td><td align="center">Gtest</td><td align="center">无</td></tr><tr><td align="center">Python</td><td align="center">无</td><td align="center"><code># &#39;&#39;&#39; &quot;&quot;&quot;</code></td><td align="center">有: 和<code>\t</code>或<code></code></td><td align="center">无</td><td align="center">无</td><td align="center">pip</td><td align="center">unittest</td><td align="center">无</td></tr><tr><td align="center">Go</td><td align="center">无</td><td align="center"><code>// /**/</code></td><td align="center">{ 不可换行</td><td align="center">gofmt</td><td align="center">godoc</td><td align="center">go get</td><td align="center">go test</td><td align="center">mod</td></tr><tr><td align="center">Rust</td><td align="center">;</td><td align="center"><code>// /**/</code></td><td align="center">{ 可换行</td><td align="center">rustfmt</td><td align="center">rustdoc</td><td align="center">rustup</td><td align="center">cargo test</td><td align="center">cargo</td></tr><tr><td align="center">Dart</td><td align="center">;</td><td align="center"><code>// /**/</code></td><td align="center">{ 可换行</td><td align="center">dartfmt</td><td align="center">dartdoc</td><td align="center">pub</td><td align="center">group test</td><td align="center">无</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/07/B50NLj.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart程序结构</title>
    <link href="http://www.shieber.cn/title/e0879928/"/>
    <id>http://www.shieber.cn/title/e0879928/</id>
    <published>2020-11-06T16:11:02.000Z</published>
    <updated>2020-11-11T07:19:45.456Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/07/B5wXGT.png" alt="cpygorsdart"></p><a id="more"></a><p>本文为五种语言对比学习的第三篇：程序结构。</p><h1 id="C程序结构"><a href="#C程序结构" class="headerlink" title="C程序结构"></a>C程序结构</h1><p>C 程序主要包括以下部分：</p><ul><li>预处理(#)</li><li>变量</li><li>语句/表达式</li><li>函数</li><li>标签</li><li>注释</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C语言程序hlwd.c</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Hello, World!\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shieber@Kew:c 🐁  gcc hlwd.c -o hlwd</span><br><span class="line">shieber@Kew:c 🐁  ./hlwd                 #C程序执行方法</span><br><span class="line">Hello, World!</span><br></pre></td></tr></table></figure><h1 id="Python程序结构"><a href="#Python程序结构" class="headerlink" title="Python程序结构"></a>Python程序结构</h1><p>Python 程序主要包括以下部分：</p><ul><li>包(import)</li><li>编码(utf-8)</li><li>变量</li><li>语句/表达式</li><li>函数</li><li>类</li><li>注释</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python语言程序hlwd.py</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hw</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"Hello, World!"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    hw()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shieber@Kew:python 🐁  python3 hlwd.py     <span class="comment">#Python程序执行方法</span></span><br><span class="line">Hello, World!</span><br></pre></td></tr></table></figure><h1 id="Go程序结构"><a href="#Go程序结构" class="headerlink" title="Go程序结构"></a>Go程序结构</h1><p>Go 程序主要包括以下部分：</p><ul><li>包(import)</li><li>变量</li><li>语句/表达式</li><li>函数</li><li>接口</li><li>标签</li><li>注释</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Go语言程序hlwd.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"Hello, World!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shieber@Kew:<span class="keyword">go</span> 🐁  <span class="keyword">go</span> run hlwd.<span class="keyword">go</span>         #Go程序执行方法<span class="number">1</span></span><br><span class="line">Hello, World!</span><br><span class="line">shieber@Kew:<span class="keyword">go</span> 🐁  <span class="keyword">go</span> build hlwd.py -o hlwd</span><br><span class="line">shieber@Kew:<span class="keyword">go</span> 🐁  ./hlwd                 #Go程序执行方法<span class="number">2</span></span><br><span class="line">Hello, World!</span><br></pre></td></tr></table></figure><h1 id="Rust程序结构"><a href="#Rust程序结构" class="headerlink" title="Rust程序结构"></a>Rust程序结构</h1><p>Rust 程序主要包括以下部分：</p><ul><li>箱(crate)/包(package)</li><li>变量</li><li>语句/表达式</li><li>函数</li><li>特性</li><li>模块(mod)</li><li>标签</li><li>注释</li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Rust语言程序hlwd.rs</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"Hello, World!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">shieber@Kew:rust 🐁  rustc hlwd.rs    </span><br><span class="line">shieber@Kew:rust 🐁  ./hlwd            #Rust程序执行方法<span class="number">1</span></span><br><span class="line">Hello, World!</span><br><span class="line">shieber@Kew:rust 🐁  cargo run         #Rust程序执行方法<span class="number">2</span></span><br><span class="line">Hello, World!</span><br><span class="line">shieber@Kew:rust 🐁  cargo build       </span><br><span class="line">shieber@Kew:rust 🐁  cargo run         #Rust程序执行方法<span class="number">3</span></span><br><span class="line">Hello, World!</span><br></pre></td></tr></table></figure><h1 id="Dart程序结构"><a href="#Dart程序结构" class="headerlink" title="Dart程序结构"></a>Dart程序结构</h1><p>Dart 程序主要包括以下部分：</p><ul><li>库(import)和包(package)</li><li>变量</li><li>语句/表达式</li><li>函数</li><li>类</li><li>接口</li><li>集合/泛型</li><li>注释</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Dart语言程序hlwd.dart</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello, World!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shieber@Kew:dart 🐁  dart hlwd.dart         <span class="comment">#Dart程序执行方法1</span></span><br><span class="line">Hello, World!</span><br><span class="line">shieber@Kew:dart 🐁  dart2native hlwd.dart -o hlwd</span><br><span class="line">shieber@Kew:dart 🐁  ./hlwd                 <span class="comment">#Dart程序执行方法2</span></span><br><span class="line">Hello, World!                                </span><br><span class="line">shieber@Kew:dart 🐁  dart2js hlwd.dart -o hlwd <span class="comment">#使用浏览器执行</span></span><br></pre></td></tr></table></figure><p>通过对比，发现五种语言程序结构大体是差不多的。这五种语言同时也有许多不同：</p><ul><li>Go和Python语言结尾不用分号</li><li>Dart语言和Python一样，可以看成脚本型语言</li><li>Dart语言和C/Go/Rust一样，又能看成编译型语言</li><li>C必须编译执行，Python直接执行，Go可即时和编译执行</li><li>Rust可编译也可用Cargo执行，Dart即能当脚本执行又能编译后执行</li><li>Python用#作为注释符号，其余四种使用的注释都是//或/**/</li><li>Python中并不需要一个叫main的主函数，而其他四种语言均需要main函数。</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/07/B5wXGT.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C、Python、Go、Rust、Dart关键字</title>
    <link href="http://www.shieber.cn/title/909876b5/"/>
    <id>http://www.shieber.cn/title/909876b5/</id>
    <published>2020-11-06T13:38:01.000Z</published>
    <updated>2020-11-11T07:18:36.489Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/07/B5w4xg.png" alt="cpygorsdart"></p><a id="more"></a><p>本文是对比学习的第二篇，主要统计关键字。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">                     <span class="function">C <span class="title">Keywords</span><span class="params">(<span class="number">34</span>)</span></span></span><br><span class="line"><span class="function"><span class="keyword">auto</span>        <span class="keyword">double</span>       <span class="keyword">int</span>         struct       <span class="keyword">inline</span> </span></span><br><span class="line"><span class="function"><span class="keyword">break</span>       <span class="keyword">else</span>         <span class="keyword">long</span>        <span class="keyword">switch</span>       <span class="keyword">restrict</span></span></span><br><span class="line">case        enum         register    typedef      ...</span><br><span class="line"><span class="keyword">char</span>        <span class="keyword">extern</span>       <span class="keyword">return</span>      <span class="keyword">union</span></span><br><span class="line"><span class="keyword">const</span>       <span class="keyword">float</span>        <span class="keyword">short</span>       <span class="keyword">unsigned</span></span><br><span class="line"><span class="keyword">continue</span>    <span class="keyword">for</span>          <span class="keyword">signed</span>      <span class="keyword">void</span></span><br><span class="line"><span class="keyword">default</span>     <span class="keyword">goto</span>         <span class="keyword">sizeof</span>      <span class="keyword">volatile</span></span><br><span class="line"><span class="keyword">do</span>          <span class="keyword">if</span>           <span class="keyword">static</span>      <span class="keyword">while</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">                     Python Keywords(<span class="number">33</span>)</span><br><span class="line"><span class="keyword">and</span>         <span class="function"><span class="keyword">def</span>          <span class="title">for</span>         <span class="title">in</span>           <span class="title">or</span>        <span class="title">while</span></span></span><br><span class="line"><span class="function"><span class="title">as</span>          <span class="title">del</span>          <span class="title">from</span>        <span class="title">is</span>           <span class="title">pass</span>      <span class="title">with</span> </span></span><br><span class="line"><span class="function"><span class="title">assert</span>      <span class="title">elif</span>         <span class="title">False</span>       <span class="title">lambda</span>       <span class="title">raise</span>     <span class="title">yield</span></span></span><br><span class="line"><span class="function"><span class="title">break</span>       <span class="title">else</span>         <span class="title">global</span>      <span class="title">nonlocal</span>     <span class="title">return</span></span></span><br><span class="line"><span class="function"><span class="title">class</span>       <span class="title">except</span>       <span class="title">if</span>          <span class="title">not</span>          <span class="title">try</span>    </span></span><br><span class="line"><span class="function"><span class="title">continue</span>    <span class="title">finally</span>      <span class="title">import</span>      <span class="title">None</span>         <span class="title">True</span></span></span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">                     Go Keywords(<span class="number">25</span>)     </span><br><span class="line"><span class="keyword">break</span>       <span class="keyword">default</span>      <span class="function"><span class="keyword">func</span>        <span class="title">interface</span>    <span class="title">select</span></span></span><br><span class="line"><span class="keyword">case</span>        <span class="keyword">defer</span>        <span class="keyword">go</span>          <span class="keyword">map</span>          <span class="keyword">struct</span></span><br><span class="line"><span class="keyword">chan</span>        <span class="keyword">else</span>         <span class="keyword">goto</span>        <span class="keyword">package</span>      <span class="keyword">switch</span></span><br><span class="line"><span class="keyword">const</span>       <span class="keyword">fallthrough</span>  <span class="keyword">if</span>          <span class="keyword">range</span>        <span class="keyword">type</span></span><br><span class="line"><span class="keyword">continue</span>    <span class="keyword">for</span>          <span class="keyword">import</span>      <span class="keyword">return</span>       <span class="keyword">var</span></span><br></pre></td></tr></table></figure><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">                     Rust Keywords(<span class="number">39</span>)  </span><br><span class="line"><span class="keyword">as</span>          <span class="keyword">dyn</span>          <span class="keyword">if</span>          <span class="keyword">move</span>         <span class="class"><span class="keyword">struct</span>    <span class="title">use</span></span></span><br><span class="line"><span class="keyword">async</span>       <span class="keyword">else</span>         <span class="keyword">impl</span>        <span class="keyword">mut</span>          <span class="keyword">super</span>     <span class="keyword">where</span></span><br><span class="line"><span class="keyword">await</span>       <span class="class"><span class="keyword">enum</span>         <span class="title">in</span></span>          <span class="keyword">pub</span>          <span class="class"><span class="keyword">trait</span>     <span class="title">while</span></span></span><br><span class="line"><span class="keyword">break</span>       <span class="keyword">extern</span>       <span class="keyword">let</span>         <span class="keyword">ref</span>          <span class="literal">true</span>      <span class="keyword">Self</span></span><br><span class="line"><span class="keyword">const</span>       <span class="literal">false</span>        <span class="keyword">loop</span>        <span class="keyword">return</span>       <span class="class"><span class="keyword">type</span></span></span><br><span class="line"><span class="class"><span class="title">continue</span></span>    <span class="function"><span class="keyword">fn</span>           <span class="title">match</span>       <span class="title">self</span>         <span class="title">union</span></span></span><br><span class="line"><span class="function"><span class="title">crate</span>       <span class="title">for</span>          <span class="title">mod</span>         <span class="title">static</span>       <span class="title">unsafe</span></span></span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">                     Dart Keywords(<span class="number">60</span>)</span><br><span class="line"><span class="keyword">abstract</span>    <span class="keyword">continue</span>     <span class="keyword">extends</span>     <span class="keyword">implements</span>   <span class="keyword">operator</span>  <span class="keyword">this</span></span><br><span class="line"><span class="keyword">as</span>          <span class="keyword">covariant</span>    <span class="keyword">factory</span>     <span class="keyword">import</span>       <span class="keyword">part</span>      <span class="keyword">throw</span></span><br><span class="line"><span class="keyword">assert</span>      <span class="keyword">default</span>      <span class="keyword">false</span>       <span class="keyword">in</span>           <span class="keyword">rethrow</span>   <span class="keyword">true</span></span><br><span class="line"><span class="keyword">async</span>       <span class="keyword">deferred</span>     <span class="keyword">final</span>       <span class="class"><span class="keyword">interface</span>    <span class="title">return</span>    <span class="title">try</span></span></span><br><span class="line"><span class="class"><span class="title">await</span>       <span class="title">do</span>           <span class="title">finally</span>     <span class="title">is</span>           <span class="title">set</span>       <span class="title">typedef</span></span></span><br><span class="line"><span class="class"><span class="title">break</span>       <span class="title">dynamic</span>      <span class="title">for</span>         <span class="title">library</span>      <span class="title">show</span>      <span class="title">var</span>       </span></span><br><span class="line"><span class="class"><span class="title">case</span>        <span class="title">else</span>         <span class="title">function</span>    <span class="title">mixin</span>        <span class="title">static</span>    <span class="title">void</span>      </span></span><br><span class="line"><span class="class"><span class="title">catch</span>       <span class="title">enum</span>         <span class="title">get</span>         <span class="title">new</span>          <span class="title">super</span>     <span class="title">while</span>     </span></span><br><span class="line"><span class="class"><span class="title">class</span>       <span class="title">export</span>       <span class="title">hide</span>        <span class="title">null</span>         <span class="title">switch</span>    <span class="title">with</span>      </span></span><br><span class="line"><span class="class"><span class="title">const</span>       <span class="title">external</span>     <span class="title">if</span>          <span class="title">on</span>           <span class="title">sync</span>      <span class="title">yield</span></span></span><br></pre></td></tr></table></figure><p>下面是所有语言的都有的关键字，可见各门语言还是有差异的，不同的关键字反应了实现不同语言编译器的考量不同。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span>       <span class="literal">false</span></span><br><span class="line"><span class="keyword">continue</span>    <span class="keyword">for</span></span><br><span class="line"><span class="keyword">else</span>        <span class="keyword">return</span></span><br><span class="line"><span class="keyword">if</span>          <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>Go是没有while的，要实现while功能得自己用for来构造。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123;                            while condition &#123;</span><br><span class="line">    <span class="keyword">if</span> !condition &#123;     等于         do_works()</span><br><span class="line">        <span class="keyword">break</span>                    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    do_works()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>从上面可见，Go语言关键字最少，只25个，学习起来最轻松，Python则次之。C关键字实际不只34个，但常用就34个，C语言是计算机底层的核心语言，是现代互联网的基座。Rust是新出的一门底层语言，定位类似C语言，但强调安全，并发。Rust引入的生命周期，所有权/借用机制是学习的难点。最后，Dart关键字足足60个，看来学习难度较大，但因为它本身语法和Python，Go有类似的地方，所以难度会减少。但60个和Go的25个比起来，学习负担还是太重了。</p><p>为什么我只列出了这五种语言的关键字呢？C/Rust偏底层，C++存在的问题，Rust解决了，所以我学习的重点不再是C/C++，而是C/Rust，相信未来的主流学习也是C/Rust吧。当然，C++还不会被淘汰，但很多工作会被Rust替代。Go语言在云/分布式/微服务领域大放异彩，Python和Go可以作为中间层语言使用。Dart是谷歌新操作系统Fuchsia的Flutter平台默认语言，可通过Flutter编写上层应用，未来可能成为跨系统语言。其实Go和Dart都是谷歌公司开发的语言，未来预期不会太差吧？</p><p><img src="https://s1.ax1x.com/2020/11/06/Bfrs4f.png" alt="dart"></p><p><img src="https://s1.ax1x.com/2020/11/06/BfsWRO.jpg" alt="fuchsia"></p><p>底层C/Rust，中层Go/Python，上层Dart，我觉得这算是一个比较好的搭配。Java/C++这些早就火了的语言也值得学习，然而精力有限，就留给其他愿意折腾的人去学习吧。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/07/B5w4xg.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>C/Python/Go/Rust/Dart语言历史</title>
    <link href="http://www.shieber.cn/title/9b69707/"/>
    <id>http://www.shieber.cn/title/9b69707/</id>
    <published>2020-11-06T05:40:52.000Z</published>
    <updated>2020-11-11T07:17:57.249Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/11/07/B5wgat.png" alt="cpygorsdart"></p><a id="more"></a><p>最近学习Rust和Dart语言，发现难度挺大的，尤其是在自己会python/go/c这些语言的情况下，特别容易搞混。所以就想着对比学习，总结五种语言的特性，从它们的异同间发现知识点。</p><p>本文为五种语言对比学习的第一篇，主要讲语言的历史沿革。</p><h1 id="C语言历史"><a href="#C语言历史" class="headerlink" title="C语言历史"></a>C语言历史</h1><p><img src="https://s1.ax1x.com/2020/11/06/BhcSt1.png" alt="c"></p><p>C语言是一种通用的高级语言，最初是由丹尼斯·里奇在贝尔实验室为开发UNIX操作系统而设计的。C语言最开始是于1972年在DEC PDP-11计算机上被首次实现。C语言是以B语言为基础的，B语言大概是在1970年被引进的。在1978年，布莱恩·柯尼汉（Brian Kernighan）和丹尼斯·里奇（Dennis Ritchie）制作了C的第一个公开可用的描述，现在被称为K&amp;R标准。</p><p>UNIX操作系统，C编译器，和几乎所有的UNIX应用程序都是用C语言编写的。由于这些原因，C 语言现在已经成为一种广泛使用的专业语言。C语言标准是于1988年由美国国家标准协会（ANSI，全称 American National Standard Institute）制定的。</p><p>C是编译型语言，运行前需要编译，在类Unix平台，gcc是默认的C编译器。</p><p>C优点：</p><ul><li>易于学习</li><li>结构化语言</li><li>产生高效率程序</li><li>处理底层的活动</li><li>在多种计算机平台上编译</li></ul><p>C使用领域：</p><ul><li>汇编器</li><li>编译器</li><li>解释器</li><li>数据库</li><li>操作系统</li><li>文本编辑器</li><li>网络驱动器</li></ul><h1 id="Python语言历史"><a href="#Python语言历史" class="headerlink" title="Python语言历史"></a>Python语言历史</h1><p><img src="https://s1.ax1x.com/2020/11/06/Bh6UyD.png" alt="python"></p><p>Python 是一个高层次的结合了解释性、互动性和面向对象的脚本语言。Python的设计具有很强的可读性，相比其他语言经常使用英文关键字，其他语言的一些标点符号，它具有比其他语言更有特色的语法结构。</p><p>Python 是由 Guido van Rossum 在八十年代末和九十年代初，在荷兰国家数学和计算机科学研究所设计出来的。</p><p>Python 本身也是由诸多其他语言发展而来的,这包括 ABC、Modula-3、C、C++、Algol-68、SmallTalk、Unix shell 和其他的脚本语言等等。</p><p>Python 2.0 于 2000 年 10 月 16 日发布，增加了实现完整的垃圾回收，并且支持 Unicode。Python 3.0 于 2008 年 12 月 3 日发布，此版不完全兼容之前的 Python 源代码。不过，很多新特性后来也被移植到旧的Python 2.6/2.7版本。</p><p>Python是解释型语言，执行需要解释器而不是编译器，Python的解释器有多种，默认官方解释器是CPython。除此之外还有IPython，Jython，PyPY，Pyston v2等。</p><p>Python优点：</p><ul><li>易阅读：Python代码定义的更清晰</li><li>易学习：Python有较少的关键字，结构简单</li><li>易维护：Python的成功在于它的源代码是相当容易维护的</li><li>易可扩展：如果你需要一段运行很快的关键代码，或者是想要编写一些不愿开放的算法，你可以使用C或C++完成那部分程序，然后从你的Python程序中调用。</li><li>广泛的标准库：Python的最大的优势之一是丰富的库，跨平台，在UNIX，Windows和Mac兼容很好</li></ul><p>Python使用领域：</p><ul><li>Web开发</li><li>游戏开发</li><li>网络爬虫</li><li>科学计算</li><li>人工智能</li><li>自动化运维</li></ul><h1 id="Go语言历史"><a href="#Go语言历史" class="headerlink" title="Go语言历史"></a>Go语言历史</h1><p><img src="https://s1.ax1x.com/2020/11/06/Bh6cSf.png" alt="go"></p><p>2007年9月，Rob Pike在Google分布式编译平台上进行C++编译，在漫长的等待过程中，他和Robert Griesemer探讨了程序设计语言的一些关键性问题，他们认为，简化编程语言相比于在臃肿的语言上不断增加新特性，会是更大的进步。随后他们在编译结束之前说服了身边的Ken Thompson(发明C和Unix)，觉得有必要为此做一些事情。几天后，他们发起了一个叫Golang的项目，将它作为自由时间的实验项目。</p><p>2008年5月 Google发现了GO语言的巨大潜力，得到了Google的全力支持，这些人开始全职投入GO语言的设计和开发。</p><p>2009年11月 Go语言第一个版本发布。2012年3月 第一个正式版本Go1.0发布。</p><p>2015年8月 Go1.5发布，这个版本被认为是历史性的。完全移除C语言部分，使用Go编译Go，少量代码使用汇编实现。Go是编译型语言，执行需要Go编译器。</p><p>当前(2020)，Go语言成了云计算核心语言，网络时代的C语言。</p><p>Go优点：</p><ul><li>学习简单</li><li>编译效率高</li><li>内存占用少</li><li>包管理和工程管理(mod)使用方便</li><li>天生自带并发，容易实现大并发程序</li></ul><p>Go使用领域：</p><ul><li>数据库</li><li>云平台</li><li>网络编程</li><li>消息中间件</li><li>分布式系统</li></ul><h1 id="Rust语言历史"><a href="#Rust语言历史" class="headerlink" title="Rust语言历史"></a>Rust语言历史</h1><p><img src="https://s1.ax1x.com/2020/11/06/BhcV7d.png" alt="rust"></p><p>Rust 语言是一种高效、可靠的通用高级语言。其高效不仅限于开发效率，它的执行效率也是令人称赞的，是一种少有的兼顾开发效率和执行效率的语言。</p><p>Rust最早是Mozilla雇员Graydon Hoare的一个个人项目，从2009年开始，得到了Mozilla研究院的支助，2010年项目对外公布。2010 ～2011年间实现的自举。从此以后，Rust经历了巨大的设计变化和反复（历程极其艰辛），终于在2015 年5月15日发布了1.0版。在这个研发过程中，Rust建立了一个强大活跃的社区，形成了一整套完善稳定的项目贡献机制。</p><p>Rust能得到Mozilla研究院的支持，是因为Mozilla在开发和维护Firefox的Gecko引擎的时候，对于这样一个由C++写的维护了20多年的，累计上千万行的代码库，已经不胜厌烦。由于历史包袱及各种漏洞、性能瓶颈，Firefox已经远远落后竞争对手Google Chrome了。Mozilla亟需一种能够安全编程的语言来重新让 Firefox能跟上并超越时代。于是Rust项目就被资助并坚持孵化，直到发布1.0。</p><p>影响了Rust的流行的编程语言包括C, C++, C#, Erlang, Haskell, OCaml, Ruby, Scheme 和 Swift 等。Rust也影响了C#7, Elm, Idris, Swift。</p><p>Rust是编译型语言，执行需要rustc编译器。</p><p>Rust优点：</p><ul><li>安全</li><li>并发</li><li>宏强大</li><li>高性能</li><li>工具链完整</li></ul><p>Rust使用领域：</p><ul><li>命令行</li><li>数据库</li><li>Web应用</li><li>操作系统</li><li>网络服务器</li><li>嵌入式设备</li></ul><h1 id="Dart语言历史"><a href="#Dart语言历史" class="headerlink" title="Dart语言历史"></a>Dart语言历史</h1><p><img src="https://s1.ax1x.com/2020/11/06/BhcDuF.png" alt="dart"></p><p>Dart诞生于2011 年，刚开始的定位是取代JavaScript，但却以Flutter的编程语言出道而被人熟知，它是强类型语言却又同时支持类型推导，它支持AOT也支持JIT，由于是第一个使用声明式UI的编程语言，也引发过很过争议。除了用于Flutter，很少有人知道，Dart也可以用于后台开发，Dart甚至也可以和C直接交互。Dart语言设计者Lars Bak就是jvm发明者，从此点可以看出Dart有Java的基因。</p><p>Dart是既是编译型又是解释型语言，执行可用dart利用DartVm，也可用dart2js, dart2native编译器编译为js代码和原生代码。</p><p>Dart优点：</p><ul><li>异步</li><li>跨平台</li><li>包管理解决依赖</li></ul><p>Dart使用领域：</p><ul><li>命令行</li><li>前后端</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/11/07/B5wgat.png&quot; alt=&quot;cpygorsdart&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="编程语言" scheme="http://www.shieber.cn/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="C" scheme="http://www.shieber.cn/tags/C/"/>
    
      <category term="Python" scheme="http://www.shieber.cn/tags/Python/"/>
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
      <category term="Rust" scheme="http://www.shieber.cn/tags/Rust/"/>
    
      <category term="Dart" scheme="http://www.shieber.cn/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>Go的各种数据结构底层表示</title>
    <link href="http://www.shieber.cn/title/e985015c/"/>
    <id>http://www.shieber.cn/title/e985015c/</id>
    <published>2020-10-21T02:55:08.000Z</published>
    <updated>2020-11-06T14:02:48.966Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/10/21/BCAWVS.png" alt="go-datastructure"></p><a id="more"></a><p>go语言内置数据类型包含数值，字符串和引用类型，这些不同类型的数据底层结构是不一样的。面试时问到部分的底层结构，下面对所有内容作一个总结。</p><h3 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h3><p>整数型</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">按照数值范围，是否有负数和特殊用途，存在八种类型。</span><br><span class="line">类型     数值范围</span><br><span class="line"><span class="keyword">int8</span>    [<span class="number">-128</span><span class="number">-127</span>]</span><br><span class="line"><span class="keyword">int16</span>   [<span class="number">-32768</span><span class="number">-32767</span>]</span><br><span class="line"><span class="keyword">int32</span>   [<span class="number">-2147483648</span><span class="number">-2147483647</span>]</span><br><span class="line"><span class="keyword">int64</span>   [<span class="number">-9223372036854775808</span><span class="number">-9223372036854775807</span>]</span><br><span class="line"><span class="keyword">uint8</span>   [<span class="number">0</span><span class="number">-255</span>]</span><br><span class="line"><span class="keyword">uint16</span>  [<span class="number">0</span><span class="number">-65535</span>]</span><br><span class="line"><span class="keyword">uint32</span>  [<span class="number">0</span><span class="number">-4294967295</span>]</span><br><span class="line"><span class="keyword">uint64</span>  [<span class="number">0</span><span class="number">-18446744073709551615</span>]</span><br><span class="line"><span class="keyword">int</span>     依机器为<span class="keyword">int32</span>/<span class="keyword">int64</span>位</span><br><span class="line"><span class="keyword">uint</span>    依机器为<span class="keyword">uint32</span>/<span class="keyword">uint64</span>位</span><br><span class="line"><span class="keyword">byte</span>    字节，值范围<span class="keyword">uint8</span></span><br><span class="line"><span class="keyword">rune</span>    码点，值范围<span class="keyword">int32</span></span><br><span class="line"><span class="keyword">uintptr</span> 保存指针的数值，值范围<span class="keyword">uint</span></span><br><span class="line"></span><br><span class="line">整数直接存储在存储器中，有符号数包含符号位s和尾数部分m。</span><br><span class="line">如<span class="number">32</span>位十进制有符号数d = <span class="number">-11</span></span><br><span class="line">s = <span class="number">1</span></span><br><span class="line">m = <span class="number">0000000000000000000000000001011</span></span><br><span class="line"><span class="number">1</span> <span class="number">0000000000000000000000000001011</span></span><br><span class="line">s   m 两部分组合得到d</span><br><span class="line">d = <span class="number">10000000000000000000000000001011</span> (<span class="number">32</span>位计算机存储的<span class="number">-11</span>)</span><br><span class="line"></span><br><span class="line">若是<span class="number">64</span>位十进制有符号数d = <span class="number">-11</span></span><br><span class="line">d = <span class="number">1000000000000000000000000000000000000000000000000000000000001011</span> (<span class="number">64</span>位计算机存储的<span class="number">-11</span>)</span><br></pre></td></tr></table></figure><p>浮点数</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">按照数值范围分为如下两种类型。</span><br><span class="line"><span class="keyword">float32</span></span><br><span class="line"><span class="keyword">float64</span></span><br><span class="line"></span><br><span class="line">浮点数涉及小数，必须将小数表示为二进制。浮点数底层结构包含符号位s，阶码e，尾数m。</span><br><span class="line">浮点数f表示规则如下</span><br><span class="line"><span class="number">1.</span>首位s为符号位，s=<span class="number">0</span>时，f为正数，s=<span class="number">1</span>时，f为负数。</span><br><span class="line"><span class="number">2.</span>接着<span class="number">8</span>/<span class="number">11</span>位为阶码，阶码为f二进制表示科学计数法的指数加<span class="number">127</span>/<span class="number">1023</span>的二进制数。</span><br><span class="line"><span class="number">3.</span>最后<span class="number">23</span>/<span class="number">52</span>位为尾数，就是二进制表示的小数部分。</span><br><span class="line">其中/两侧的数分别对应<span class="number">32</span>位和<span class="number">64</span>位。</span><br><span class="line"></span><br><span class="line">如<span class="number">32</span>位的十进制数f = <span class="number">5.0</span> = <span class="number">0</span>b101<span class="number">.0</span> = <span class="number">0</span>b1<span class="number">.01</span>x2^<span class="number">2</span></span><br><span class="line">s = <span class="number">0</span></span><br><span class="line">e = <span class="number">2</span>+<span class="number">127</span>=<span class="number">10000001</span> </span><br><span class="line">m = <span class="number">01</span> </span><br><span class="line"><span class="number">0</span> <span class="number">10000001</span> <span class="number">01000000000000000000000</span> </span><br><span class="line">s   e            m 三部分组合得到f</span><br><span class="line">f = <span class="number">01000000101000000000000000000000</span> (<span class="number">32</span>位计算机存储的<span class="number">5.0</span>)</span><br><span class="line"></span><br><span class="line">同理<span class="number">64</span>位的十进制数f = <span class="number">5.0</span> = <span class="number">0</span>b101<span class="number">.0</span> = <span class="number">0</span>b1<span class="number">.01</span>x2^<span class="number">2</span></span><br><span class="line">s = <span class="number">0</span></span><br><span class="line">e = <span class="number">2</span>+<span class="number">1023</span>=<span class="number">10000000001</span></span><br><span class="line">m = <span class="number">01</span> </span><br><span class="line"><span class="number">0</span> <span class="number">10000000001</span> <span class="number">0100000000000000000000000000000000000000000000000000</span> </span><br><span class="line">s   e            m</span><br><span class="line">f = <span class="number">0100000000010100000000000000000000000000000000000000000000000000</span> (<span class="number">64</span>位计算机存储的<span class="number">5.0</span>)</span><br></pre></td></tr></table></figure><p>复数</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">按照数值范围分为如下两种类型。</span><br><span class="line"><span class="keyword">complex64</span></span><br><span class="line"><span class="keyword">complex128</span></span><br><span class="line">复数存在实部和虚部，而且都为浮点数，所以底层为两个浮点数的组合，输出时虚部会添加上i</span><br></pre></td></tr></table></figure><h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><p>字符串底层结构</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="keyword">string</span> <span class="keyword">struct</span> &#123; </span><br><span class="line">    str unsafe.Pointer <span class="comment">//指针</span></span><br><span class="line">    <span class="built_in">len</span> <span class="keyword">int</span>            <span class="comment">//长度</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="引用类型"><a href="#引用类型" class="headerlink" title="引用类型"></a>引用类型</h3><p>数组底层结构   </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> array <span class="keyword">struct</span> &#123; </span><br><span class="line">    array unsafe.Pointer <span class="comment">//指针 </span></span><br><span class="line">    <span class="built_in">len</span> <span class="keyword">int</span>              <span class="comment">//长度</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>切片底层结构   </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> slice <span class="keyword">struct</span> &#123; </span><br><span class="line">    array unsafe.Pointer <span class="comment">//指针</span></span><br><span class="line">    <span class="built_in">len</span> <span class="keyword">int</span>              <span class="comment">//长度</span></span><br><span class="line">    <span class="built_in">cap</span> <span class="keyword">int</span>              <span class="comment">//容量(切片基于数组)</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>映射底层结构   </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> hmap <span class="keyword">struct</span> &#123;</span><br><span class="line">    count     <span class="keyword">int</span>   </span><br><span class="line">    flags     <span class="keyword">uint8</span> </span><br><span class="line">    B         <span class="keyword">uint8</span>          <span class="comment">//平衡因子</span></span><br><span class="line">    noverflow <span class="keyword">uint16</span> </span><br><span class="line">    hash0     <span class="keyword">uint32</span> </span><br><span class="line">    buckets   unsafe.Pointer <span class="comment">//桶</span></span><br><span class="line">    bucket    unsafe.Pointer <span class="comment">//旧桶</span></span><br><span class="line">    nevacuate <span class="keyword">uintptr</span></span><br><span class="line">    extra     *mapextra </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>安全映射底层结构 </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Map <span class="keyword">struct</span> &#123;</span><br><span class="line">    mu Mutex   <span class="comment">//锁(并发安全)</span></span><br><span class="line">    dirty <span class="keyword">map</span>[<span class="keyword">interface</span>&#123;&#125;]*entry</span><br><span class="line">    misses <span class="keyword">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通道底层结构 </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> hchan <span class="keyword">struct</span> &#123;</span><br><span class="line">    qcount   <span class="keyword">uint</span>           <span class="comment">// 队列中元素个数</span></span><br><span class="line">    dataqsiz <span class="keyword">uint</span>           <span class="comment">// 队列中元素大小</span></span><br><span class="line">    buf      unsafe.Pointer <span class="comment">// 指向缓冲区的指针</span></span><br><span class="line">    elemsize <span class="keyword">uint16</span></span><br><span class="line">    closed   <span class="keyword">uint32</span></span><br><span class="line">    elemtype *_type         <span class="comment">// 元素类型</span></span><br><span class="line">    sendx    <span class="keyword">uint</span>           <span class="comment">// 发送下标</span></span><br><span class="line">    recvx    <span class="keyword">uint</span>           <span class="comment">// 接收下标</span></span><br><span class="line">    sendq    waitq          <span class="comment">// 发送队列</span></span><br><span class="line">    recvq    waitq          <span class="comment">// 接收队列</span></span><br><span class="line">    lock     mutex          <span class="comment">// 锁(并发安全)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>无方法的接口底层结构</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> eface <span class="keyword">struct</span> &#123;</span><br><span class="line">    _type *_type          <span class="comment">//类型指针</span></span><br><span class="line">    data unsafe.Pointer   <span class="comment">//数据指针</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>有方法的接口底层结构</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ifcae <span class="keyword">struct</span> &#123;</span><br><span class="line">    tab *itab      </span><br><span class="line">    data unsafe.Pointer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> itab <span class="keyword">struct</span> &#123;</span><br><span class="line">    inter *interfacetype</span><br><span class="line">    _type *_type</span><br><span class="line">    hash  <span class="keyword">uint32</span>       <span class="comment">// 类型转换时快速判断类型是否相等</span></span><br><span class="line">    _     [<span class="number">4</span>]<span class="keyword">byte</span></span><br><span class="line">    fun   [<span class="number">1</span>]<span class="keyword">uintptr</span>   <span class="comment">// 动态数组，存储函数指针</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> _type <span class="keyword">struct</span> &#123; <span class="comment">// go类型运行时表示，所有类新基础</span></span><br><span class="line">    size       <span class="keyword">uintptr</span> <span class="comment">// 内存占用</span></span><br><span class="line">    ptrdata    <span class="keyword">uintptr</span></span><br><span class="line">    hash       <span class="keyword">uint32</span>  <span class="comment">// 判断类型是否相等</span></span><br><span class="line">    tflag      tflag</span><br><span class="line">    align      <span class="keyword">uint8</span></span><br><span class="line">    fieldAlign <span class="keyword">uint8</span></span><br><span class="line">    kind       <span class="keyword">uint8</span></span><br><span class="line">    equal      <span class="function"><span class="keyword">func</span><span class="params">(unsafe.Pointer, unsafe.Pointer)</span> <span class="title">bool</span></span></span><br><span class="line">    gcdata     *<span class="keyword">byte</span></span><br><span class="line">    str        nameOff</span><br><span class="line">    ptrToThis  typeOff</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/10/21/BCAWVS.png&quot; alt=&quot;go-datastructure&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="数据结构" scheme="http://www.shieber.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="Go" scheme="http://www.shieber.cn/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>云原生技术栈</title>
    <link href="http://www.shieber.cn/title/83723c7e/"/>
    <id>http://www.shieber.cn/title/83723c7e/</id>
    <published>2020-10-07T10:20:41.000Z</published>
    <updated>2020-10-07T11:20:07.334Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/10/07/0dYPZ6.png" alt="cloud-native"></p><a id="more"></a><p>最近折腾云原生技术，然而学了半天，感觉知识越来越复杂，涉及的技术太多了，本文特此稍做总结。</p><h3 id="什么是云原生"><a href="#什么是云原生" class="headerlink" title="什么是云原生"></a>什么是云原生</h3><p>云原生是一种新的构建软件并提供服务的架构或模式，云是和本地相对的。从技术的角度，云原生架构是基于云原生技术的一组架构原则和设计模式的集合，旨在将云应用中的非业务代码部分进行最大化的剥离，从而让云设施接管应用中原有的大量非功能特性(如弹性、韧性、安全、可观测性、灰度等)，使业务不再有非功能性业务中断困扰的同时，具备轻量、敏捷、高度自动化的特点。</p><h3 id="为什么需要云原生"><a href="#为什么需要云原生" class="headerlink" title="为什么需要云原生"></a>为什么需要云原生</h3><p>对于企业的 CIO 或者 IT 主管而言，原来企业内部 IT 建设以“烟筒”模式比较多，每个部门甚至每<br>个应用都相对独立，如何管理与分配资源成了难题。大家都基于最底层 IDC 设施独自向上构建，都需要<br>单独分配硬件资源，这就造成资源被大量占用且难以被共享。但是上云之后，由于云厂商提供了统一的<br>IaaS 能力和云服务，大幅提升了企业 IaaS 层的复用程度，CIO 或者 IT 主管自然而然想到 IaaS 以上层的系统也需要被统一，使资源、产品可被不断复用，从而能够进一步降低企业运营成本。</p><p>所有这些问题都指向一个共同点，那就是云的时代需要新的技术架构，来帮助企业应用能够更好地利<br>用云计算优势，充分释放云计算的技术红利，让业务更敏捷、成本更低的同时又可伸缩性更灵活，而这<br>些正好就是云原生架构专注解决的技术点。</p><h3 id="云原生架构原则"><a href="#云原生架构原则" class="headerlink" title="云原生架构原则"></a>云原生架构原则</h3><p>云原生架构本身作为一种架构，也有若干架构原则作为应用架构的核心架构控制面，通过遵从这些架<br>构原则可以让技术主管和架构师在做技术选择时不会出现大的偏差。</p><ul><li>服务化原则</li><li>弹性原则</li><li>可观测原则</li><li>韧性原则</li><li>自动化原则</li><li>零信任原则</li><li>持续演进原则</li></ul><h3 id="云原生主要技术"><a href="#云原生主要技术" class="headerlink" title="云原生主要技术"></a>云原生主要技术</h3><ul><li>容器</li><li>微服务</li><li>DevOps</li><li>Serverless</li><li>Service Mesh</li><li>开放应用模型</li><li>云原生中间件</li></ul><h3 id="云原生技术栈"><a href="#云原生技术栈" class="headerlink" title="云原生技术栈"></a>云原生技术栈</h3><p>云原生涉及众多技术，这些技术按照作用可分为四层，每层涉及的工具如下(只列出部分代表性工具)。蓝色框中代表CNCF孵化项目，是重点工具。</p><p><img src="https://s1.ax1x.com/2020/10/07/0dYPZ6.png" alt="cloud-native"></p><p>1.基础层（Provisioning）</p><ul><li>自动化和配置 KubeEdge Ansible</li><li>容器注册 HARBOR Dragonfly</li><li>安全管理 TUF falco</li><li>密钥管理 spiffe SPIRE</li></ul><p>2.运行时层（Runtime）  </p><ul><li>云原生存储 ROOK Portworx ceph 盘古</li><li>容器运行时 Containerd rkt cri-o</li><li>云网络 CNI</li></ul><p>3.编排和管理层（Orchestration &amp; Management）  </p><ul><li>编排和调度 K8S K3S Mesos Swarm</li><li>服务发现 CoreDNS etcd Consul</li><li>远程调用 gRPC Thrift</li><li>服务代理 Envoy CONTOUR MSON</li><li>API网关 Kong</li><li>服务网格 Linkerd Istio </li></ul><p>4.应用程序定义和开发层（Application Definition &amp; Development）  </p><ul><li>数据库 TiKV/TiDB Vitess Redis MySQL MongoDB Neo4j</li><li>流和消息传递 NATS Cloudevents Flink Spark Kafka</li><li>应用定义和镜像构建 Helm </li><li>持续集成和持续交付 Orgo Jenkins Gitlab Github</li></ul><p>除了四层技术栈，还有些跨四层运行的工具</p><p>1.平台类  </p><ul><li>Kubernetes发行版 谷歌K8S Azure K8S  AWS K8S Rancher </li><li>Kubernetes托管平台 谷歌云 AWS Azure 阿里云 阿里云 腾讯云 </li><li>Kubernetes安装程序 Minikube Rancher</li><li>PaaS/容器服务 heroku </li></ul><p>2.可观察性与分析  </p><ul><li>监控 Prometheus cortex</li><li>日志 Elasticsearch Logstash Kibana</li><li>跟踪 JAEGER </li><li>混沌 Gremlin Chaos mesh</li></ul><h3 id="云原生技术栈中的中国产品"><a href="#云原生技术栈中的中国产品" class="headerlink" title="云原生技术栈中的中国产品"></a>云原生技术栈中的中国产品</h3><ul><li>PingCAP 贡献给CNCF的有TiKV/TiDB， Chaos mesh</li><li>阿里自研了盘古，MSON，Dubbo-go</li></ul><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>技术栈涉及很多工具，像Kubernetes，Elasticsearch等都是重型工具，学习难，但光是使用它们就能干不少事。这些工具，要想都精通不太可能，基本学习使用就只用挑核心产品如Kubernetes，Docker，Etcd，Prometheus，Elasticsearch等学习，把流程搞熟悉。</p><p>工作流程能跑通后接着就是再深入某个技术点，比如  </p><ul><li>对容器编排有需求就研究Kubernetes，Mesos，Swarm </li><li>对分布式事务有需求就研究MySQL，TiDB/TiKV数据库</li><li>对实时搜索有需求就研究Elasticsearch涉及的ELK技术</li><li>对微服务有需求就研究Istio，Dubbo-go等</li><li>对容器有需求就研究Containerd，RunC，Docker等</li><li>对实时大数据处理有需求就研究Spark，Flink，MapReduce等</li></ul><p>这些技术都很复杂，而且这些技术还在随着时代发展而不断变化，不知未来以Kubernetes为代表的云原生技术又会变成什么样？精通某一个领域我认为都非常不容易，但技术人，再复杂也得学呀。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/10/07/0dYPZ6.png&quot; alt=&quot;cloud-native&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Unix时间戳</title>
    <link href="http://www.shieber.cn/title/f7591bd4/"/>
    <id>http://www.shieber.cn/title/f7591bd4/</id>
    <published>2020-09-13T12:26:40.000Z</published>
    <updated>2020-09-16T01:52:07.458Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/09/13/w0Hp2n.png" alt="unixtimestamp"></p><a id="more"></a><h2 id="Unix进入16亿秒计时"><a href="#Unix进入16亿秒计时" class="headerlink" title="Unix进入16亿秒计时"></a>Unix进入16亿秒计时</h2><p>中国时间2020-09-13 20:26:40, Unix时间戳进入16亿秒计时了。回顾Unix计时以来计算机及互联网连同人类社会的发展，可以看到每亿秒人类都取得了巨大进步，每亿秒都有每亿秒的故事。科技进步的速度不断加快，每亿秒中发生的事情也多了起来。前9亿秒基本是美国人在发展，从9亿秒开始，中国人开始入场。期待中国在接下来的每亿秒中创造出更好的技术和产品。</p><p><strong>说明</strong>:部分时间无法查到具体时间，所以用00:00:00代替。查到月份而无日期的用该月1日代替。总的来说，时间戳数量级不会错，因为一个月的时间戳2592000秒，影响不大。</p><table><thead><tr><th align="center">Unix系统时间(UTC+8)</th><th align="right">时间戳</th><th align="left">大事件</th><th align="left">地点/创立者</th></tr></thead><tbody><tr><td align="center">1970-01-01 08:00:00</td><td align="right">0.00秒</td><td align="left">Unix纪元开始</td><td align="left">美国贝尔实验室-肯·汤普森/丹尼斯·里奇</td></tr><tr><td align="center">1971-01-01 00:00:00</td><td align="right">0.31亿秒</td><td align="left">硅谷命名首次提出</td><td align="left">美国-唐·赫夫勒</td></tr><tr><td align="center">1972-01-01 00:00:00</td><td align="right">0.63亿秒</td><td align="left">C语言诞生</td><td align="left">美国贝尔实验室-丹尼斯·里奇/肯·汤普森</td></tr><tr><td align="center">1973-03-03 17:46:40</td><td align="right">1.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">1973-05-22 00:00:00</td><td align="right">1.06亿秒</td><td align="left">以太网诞生</td><td align="left">美国-施乐公司鲍伯·梅特卡夫</td></tr><tr><td align="center">1974-12-01 00:00:00</td><td align="right">1.55亿秒</td><td align="left">互联网TCP协议发布</td><td align="left">美国-温顿·瑟夫/罗伯特·卡恩</td></tr><tr><td align="center">1975-04-04 00:00:00</td><td align="right">1.65亿秒</td><td align="left">微软公司成立</td><td align="left">美国-比尔·盖茨</td></tr><tr><td align="center">1976-04-01 00:00:00</td><td align="right">1.97亿秒</td><td align="left">苹果公司成立</td><td align="left">美国-史蒂芬·乔布斯</td></tr><tr><td align="center">1976-05-04 03:33:20</td><td align="right">2.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">1977-06-01 00:00:00</td><td align="right">2.33亿秒</td><td align="left">甲骨文公司成立</td><td align="left">美国-拉里·埃里森</td></tr><tr><td align="center">1979-07-05 13:20:00</td><td align="right">3.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">1980-01-01 00:00:00</td><td align="right">3.15亿秒</td><td align="left">计算机实现TCP协议</td><td align="left">美国-Bill Joy</td></tr><tr><td align="center">1981-08-12 00:00:00</td><td align="right">3.66亿秒</td><td align="left">第一款PC电脑发布</td><td align="left">美国-IBM公司</td></tr><tr><td align="center">1982-09-04 23:06:40</td><td align="right">4.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">1983-12-01 00:00:00</td><td align="right">4.39亿秒</td><td align="left">C++语言诞生</td><td align="left">美国贝尔实验室-Bjarne Stroustrup</td></tr><tr><td align="center">1984-01-01 00:00:00</td><td align="right">4.41亿秒</td><td align="left">Matlab语言诞生</td><td align="left">美国-Cleve Moler</td></tr><tr><td align="center">1985-07-01 00:00:00</td><td align="right">4.88亿秒</td><td align="left">高通公司成立</td><td align="left">美国-雅各布斯</td></tr><tr><td align="center">1985-10-17 00:00:00</td><td align="right">4.98亿秒</td><td align="left">80386处理器发布</td><td align="left">美国-英特尔公司</td></tr><tr><td align="center">1985-11-05 08:53:20</td><td align="right">5.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">1985-11-20 00:00:00</td><td align="right">5.01亿秒</td><td align="left">Windows 1.0发布</td><td align="left">美国-微软公司</td></tr><tr><td align="center">1987-09-14 21:07:00</td><td align="right">5.58亿秒</td><td align="left">互联网进入中国</td><td align="left">中国-钱天白发出第一封邮件</td></tr><tr><td align="center">1987-09-15 00:00:00</td><td align="right">5.58亿秒</td><td align="left">华为公司成立</td><td align="left">中国-任正非</td></tr><tr><td align="center">1987-10-25 00:00:00</td><td align="right">5.62亿秒</td><td align="left">台积电公司成立</td><td align="left">中国·台湾-张忠谋</td></tr><tr><td align="center">1988-08-01 00:00:00</td><td align="right">5.86亿秒</td><td align="left">微软发布首款Office</td><td align="left">美国-微软公司</td></tr><tr><td align="center">1989-01-05 18:40:00</td><td align="right">6.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">1989-12-25 00:00:00</td><td align="right">6.30亿秒</td><td align="left">Python语言诞生</td><td align="left">荷兰-Guido von Rossum</td></tr><tr><td align="center">1990-11-27 00:00:00</td><td align="right">6.59亿秒</td><td align="left">ARM公司成立</td><td align="left">英国-赫尔曼·豪泽</td></tr><tr><td align="center">1990-12-25 00:00:00</td><td align="right">6.62亿秒</td><td align="left">万维网(WWW)诞生</td><td align="left">欧洲核子研究中心-蒂姆·伯纳斯-李</td></tr><tr><td align="center">1991-01-01 00:00:00</td><td align="right">6.63亿秒</td><td align="left">物联网概念提出</td><td align="left">美国麻省理工大学-Kevin Ashton</td></tr><tr><td align="center">1991-08-25 00:00:00</td><td align="right">6.80亿秒</td><td align="left">Linux系统诞生</td><td align="left">芬兰赫尔辛基大学-林纳斯·托瓦兹</td></tr><tr><td align="center">1992-03-08 04:26:40</td><td align="right">7.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">1993-08-22 00:00:00</td><td align="right">7.45亿秒</td><td align="left">英伟达公司成立</td><td align="left">美国-黄仁勋</td></tr><tr><td align="center">1994-10-13 00:00:00</td><td align="right">7.80亿秒</td><td align="left">第一个浏览器诞生</td><td align="left">美国-网景公司(Mozilla前身)</td></tr><tr><td align="center">1995-03-01 00:00:00</td><td align="right">7.93亿秒</td><td align="left">雅虎公司成立</td><td align="left">美国-杨致远</td></tr><tr><td align="center">1995-05-09 14:13:20</td><td align="right">8.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">1995-05-23 00:00:00</td><td align="right">8.01亿秒</td><td align="left">Java语言诞生</td><td align="left">美国-詹姆斯·高斯林</td></tr><tr><td align="center">1995-07-16 00:00:00</td><td align="right">8.05亿秒</td><td align="left">亚马逊公司成立</td><td align="left">美国-杰夫·贝佐斯</td></tr><tr><td align="center">1995-09-01 00:00:00</td><td align="right">8.09亿秒</td><td align="left">JavaScript语言诞生</td><td align="left">美国-网景公司·Brendan Eich</td></tr><tr><td align="center">1996-01-01 00:00:00</td><td align="right">8.20亿秒</td><td align="left">WiFI技术诞生</td><td align="left">澳大利亚-约翰·沙利文团队</td></tr><tr><td align="center">1997-05-11 00:00:00</td><td align="right">8.63亿秒</td><td align="left">深蓝击败象棋冠军</td><td align="left">美国-IBM公司</td></tr><tr><td align="center">1997-06-01 00:00:00</td><td align="right">8.65亿秒</td><td align="left">网易公司成立</td><td align="left">中国-丁磊</td></tr><tr><td align="center">1998-07-10 00:00:00</td><td align="right">9.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">1998-09-04 00:00:00</td><td align="right">9.04亿秒</td><td align="left">谷歌公司成立</td><td align="left">美国-拉里·佩奇/谢尔盖·布林</td></tr><tr><td align="center">1998-09-22 00:00:00</td><td align="right">9.06亿秒</td><td align="left">GFW前身开启</td><td align="left">中国-公安部</td></tr><tr><td align="center">1998-11-11 00:00:00</td><td align="right">9.10亿秒</td><td align="left">腾讯公司成立</td><td align="left">中国-马化腾</td></tr><tr><td align="center">1999-07-06 00:00:00</td><td align="right">9.30亿秒</td><td align="left">超链专利发表</td><td align="left">美国-李彦宏</td></tr><tr><td align="center">1999-09-09 00:00:00</td><td align="right">9.36亿秒</td><td align="left">阿里巴巴公司成立</td><td align="left">中国-马云</td></tr><tr><td align="center">2000-01-01 00:00:00</td><td align="right">9.40亿秒</td><td align="left">百度公司成立</td><td align="left">中国-李彦宏</td></tr><tr><td align="center">2001-09-04 00:00:00</td><td align="right">9.90亿秒</td><td align="left">佩奇超链专利发表</td><td align="left">美国-拉里·佩奇</td></tr><tr><td align="center">2001-09-09 09:46:40</td><td align="right">10.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2003-10-01 00:00:00</td><td align="right">10.64亿秒</td><td align="left">安卓公司成立</td><td align="left">美国-安迪·罗宾</td></tr><tr><td align="center">2003-10-15 00:00:00</td><td align="right">10.66亿秒</td><td align="left">支付宝诞生</td><td align="left">中国-阿里巴巴·淘宝</td></tr><tr><td align="center">2004-02-04 00:00:00</td><td align="right">10.75亿秒</td><td align="left">Facebook公司成立</td><td align="left">美国-扎克伯格</td></tr><tr><td align="center">2004-11-09 19:33:20</td><td align="right">11.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2005-01-01 00:00:00</td><td align="right">11.04亿秒</td><td align="left">大数据概念提出</td><td align="left">美国-Roger Mougalas</td></tr><tr><td align="center">2005-04-07 00:00:00</td><td align="right">11.12亿秒</td><td align="left">Git工具诞生</td><td align="left">美国-林纳斯·托瓦兹</td></tr><tr><td align="center">2006-07-28 00:00:00</td><td align="right">11.54亿秒</td><td align="left">人工神经网络诞生</td><td align="left">加拿大-杰弗瑞·辛顿</td></tr><tr><td align="center">2006-08-09 00:00:00</td><td align="right">11.55亿秒</td><td align="left">云计算概念提出</td><td align="left">美国-谷歌CEO埃里克·施密特</td></tr><tr><td align="center">2007-05-25 00:00:00</td><td align="right">11.80亿秒</td><td align="left">Pornhub上线</td><td align="left">加拿大-Pornhub公司</td></tr><tr><td align="center">2007-01-09 00:00:00</td><td align="right">11.68亿秒</td><td align="left">iPhone首款发布</td><td align="left">美国-苹果公司</td></tr><tr><td align="center">2007-11-05 00:00:00</td><td align="right">11.68亿秒</td><td align="left">安卓系统首次发布</td><td align="left">美国-谷歌公司</td></tr><tr><td align="center">2008-01-01 00:00:00</td><td align="right">11.99亿秒</td><td align="left">5G概念提出</td><td align="left">美国-美国航空航天管理局</td></tr><tr><td align="center">2008-01-11 05:20:00</td><td align="right">12.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2008-04-10 00:00:00</td><td align="right">12.07亿秒</td><td align="left">Github上线</td><td align="left">美国-汤姆·普雷斯顿</td></tr><tr><td align="center">2009-01-03 00:00:00</td><td align="right">12.30亿秒</td><td align="left">比特币创世区块诞生</td><td align="left">日本-中本聪</td></tr><tr><td align="center">2009-08-14 00:00:00</td><td align="right">12.50亿秒</td><td align="left">新浪微博诞生</td><td align="left">中国-新浪公司</td></tr><tr><td align="center">2009-09-21 00:00:00</td><td align="right">12.53亿秒</td><td align="left">Go语言诞生</td><td align="left">美国-谷歌-原贝尔实验室成员肯.汤普森等</td></tr><tr><td align="center">2009-11-11 00:00:00</td><td align="right">12.57亿秒</td><td align="left">双十一活动诞生</td><td align="left">中国-阿里巴巴·淘宝</td></tr><tr><td align="center">2010-03-04 00:00:00</td><td align="right">12.67亿秒</td><td align="left">美团公司成立</td><td align="left">中国-王兴</td></tr><tr><td align="center">2010-04-06 00:00:00</td><td align="right">12.70亿秒</td><td align="left">小米公司成立</td><td align="left">中国-雷军</td></tr><tr><td align="center">2011-01-21 00:00:00</td><td align="right">12.95亿秒</td><td align="left">微信诞生</td><td align="left">中国-腾讯·张小龙团队</td></tr><tr><td align="center">2011-03-13 15:06:40</td><td align="right">13.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2012-03-09 00:00:00</td><td align="right">13.31亿秒</td><td align="left">字节跳动成立</td><td align="left">中国-张一鸣</td></tr><tr><td align="center">2012-06-01 00:00:00</td><td align="right">13.38亿秒</td><td align="left">滴滴公司成立</td><td align="left">中国-程维</td></tr><tr><td align="center">2013-01-01 00:00:00</td><td align="right">13.56亿秒</td><td align="left">边缘计算概念提出</td><td align="left">美国-Ryan LaMothe</td></tr><tr><td align="center">2014-04-01 00:00:00</td><td align="right">13.96亿秒</td><td align="left">ofo小黄车公司成立</td><td align="left">中国-戴威</td></tr><tr><td align="center">2014-05-14 00:53:20</td><td align="right">14.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2014-06-02 00:00:00</td><td align="right">14.01亿秒</td><td align="left">Swift语言发布</td><td align="left">美国-苹果公司</td></tr><tr><td align="center">2015-01-01 00:00:00</td><td align="right">14.20亿秒</td><td align="left">云原生推出</td><td align="left">美国-CNCF</td></tr><tr><td align="center">2015-02-27 00:00:00</td><td align="right">14.24亿秒</td><td align="left">星际文件系统发布</td><td align="left">美国-协议实验室</td></tr><tr><td align="center">2015-05-15 00:00:00</td><td align="right">14.31亿秒</td><td align="left">Rust语言发布</td><td align="left">美国-Mozilla公司</td></tr><tr><td align="center">2016-03-15 17:02:00</td><td align="right">14.58亿秒</td><td align="left">Alpha-Go大败李世石</td><td align="left">韩国-Alpha-Go VS 李世石</td></tr><tr><td align="center">2016-08-16 01:40:00</td><td align="right">14.71亿秒</td><td align="left">墨子号量子卫星发射</td><td align="left">中国-中科大·潘建伟团队</td></tr><tr><td align="center">2016-09-20 00:00:00</td><td align="right">14.74亿秒</td><td align="left">抖音上线</td><td align="left">中国-字节跳动公司</td></tr><tr><td align="center">2017-07-14 10:40:00</td><td align="right">15.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2017-09-25 00:00:00</td><td align="right">15.06亿秒</td><td align="left">量子编程语言Q#发布</td><td align="left">美国-微软公司</td></tr><tr><td align="center">2017-11-16 00:00:00</td><td align="right">15.10亿秒</td><td align="left">6G概念提出</td><td align="left">英国-Neil McRae</td></tr><tr><td align="center">2019-05-23 00:00:00</td><td align="right">15.58亿秒</td><td align="left">SpaceX星链卫星发射</td><td align="left">美国-SpaceX公司</td></tr><tr><td align="center">2019-09-20 00:00:00</td><td align="right">15.68亿秒</td><td align="left">谷歌量子霸权</td><td align="left">美国-谷歌公司</td></tr><tr><td align="center">2019-11-01 00:00:00</td><td align="right">15.72亿秒</td><td align="left">5G正式商用</td><td align="left">中国-三大运营商/华为公司</td></tr><tr><td align="center">2020-01-01 08:00:00</td><td align="right">15.77亿秒</td><td align="left">Unix纪元50周年</td><td align="left"></td></tr><tr><td align="center">2020-06-18 06:55:37</td><td align="right">15.92亿秒</td><td align="left">量子编程语言Silq发布</td><td align="left">瑞士-苏黎世联邦理工学院Martin Vechev</td></tr><tr><td align="center">2020-09-13 20:26:40</td><td align="right">16.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2023-11-15 06:13:20</td><td align="right">17.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2027-01-15 16:00:00</td><td align="right">18.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2030-03-18 01:46:40</td><td align="right">19.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2033-05-18 11:33:20</td><td align="right">20.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2036-07-18 21:20:00</td><td align="right">21.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2038-01-19 11:14:08</td><td align="right">21.47亿秒</td><td align="left">所有32位操作系统报废</td><td align="left"></td></tr><tr><td align="center">2039-09-19 07:06:40</td><td align="right">22.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2042-11-19 16:53:20</td><td align="right">23.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2046-01-20 02:40:00</td><td align="right">24.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2049-03-22 12:26:40</td><td align="right">25.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2052-05-22 22:13:20</td><td align="right">26.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2055-07-24 08:00:00</td><td align="right">27.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2058-09-23 17:46:40</td><td align="right">28.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2061-11-24 03:33:20</td><td align="right">29.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2065-01-24 13:20:00</td><td align="right">30.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2068-03-26 23:06:40</td><td align="right">31.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2070-01-01 08:00:00</td><td align="right">31.50亿秒</td><td align="left">Unix纪元100周年</td><td align="left"></td></tr><tr><td align="center">2071-05-28 08:53:20</td><td align="right">32.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2074-07-28 18:40:00</td><td align="right">33.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2077-09-28 04:26:40</td><td align="right">34.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2080-11-28 14:13:20</td><td align="right">35.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2084-01-30 00:00:00</td><td align="right">36.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2087-04-01 09:46:40</td><td align="right">37.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2090-06-01 19:33:20</td><td align="right">38.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2093-08-02 05:20:00</td><td align="right">39.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2096-10-02 15:06:40</td><td align="right">40.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2099-12-04 00:53:20</td><td align="right">41.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2100-01-01 00:00:00</td><td align="right">41.02亿秒</td><td align="left">Unix纪元进入22世纪</td><td align="left"></td></tr><tr><td align="center">2103-02-04 10:40:00</td><td align="right">42.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2106-04-06 20:26:40</td><td align="right">43.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2109-06-07 06:13:20</td><td align="right">44.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2110-01-02 06:28:16</td><td align="right">44.18亿秒</td><td align="left">比特币时间戳溢出</td><td align="left"></td></tr><tr><td align="center">2112-08-07 16:00:00</td><td align="right">45.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2115-10-09 01:46:40</td><td align="right">46.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2118-l2-09 11:33:20</td><td align="right">47.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2122-02-08 21:20:00</td><td align="right">48.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2125-04-11 07:06:40</td><td align="right">49.00亿秒</td><td align="left"></td><td align="left"></td></tr><tr><td align="center">2128-06-11 16:53:20</td><td align="right">50.00亿秒</td><td align="left"></td><td align="left"></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/09/13/w0Hp2n.png&quot; alt=&quot;unixtimestamp&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="互联网" scheme="http://www.shieber.cn/categories/%E4%BA%92%E8%81%94%E7%BD%91/"/>
    
    
      <category term="unix" scheme="http://www.shieber.cn/tags/unix/"/>
    
  </entry>
  
  <entry>
    <title>如何制作deb包</title>
    <link href="http://www.shieber.cn/title/583751c1/"/>
    <id>http://www.shieber.cn/title/583751c1/</id>
    <published>2020-09-07T10:17:18.000Z</published>
    <updated>2020-09-10T10:50:59.171Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s1.ax1x.com/2020/09/10/wJoQ4U.png" alt="deb"></p><a id="more"></a><p>平时安装软件有可能用到deb包，那么它是如何制作的呢？</p><h2 id="学会包命名"><a href="#学会包命名" class="headerlink" title="学会包命名"></a>学会包命名</h2><p>包名格式：软件名_上游版本号.主版本号.次版本号-修订号_平台</p><p>如: gim_bash_0.0.4-1_amd64</p><h2 id="安排deb包内部结构"><a href="#安排deb包内部结构" class="headerlink" title="安排deb包内部结构"></a>安排deb包内部结构</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">└── gim_bash_0.0.4-1_amd64</span><br><span class="line">    ├── DEBIAN</span><br><span class="line">    │   └── control</span><br><span class="line">    └── usr</span><br><span class="line">        └── local</span><br><span class="line">            └── bin</span><br><span class="line">                └── gim</span><br></pre></td></tr></table></figure><p>上面是一个deb包打包前的结构，DEBIAN/control为控制文件，里面写了各种软件包信息。gim为代码，<br>usr/local/bin/是gim最终安装位置，也可以安装到/usr/bin，则结构如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">└── gim_bash_0.0.4-1_amd64</span><br><span class="line">    ├── DEBIAN</span><br><span class="line">    │   └── control</span><br><span class="line">    └── usr</span><br><span class="line">        └── bin</span><br><span class="line">            └── gim</span><br></pre></td></tr></table></figure><h2 id="构建流程"><a href="#构建流程" class="headerlink" title="构建流程"></a>构建流程</h2><ul><li>写好代码，(编译)，修改最终文件属性<blockquote><p>sudo chown root gim<br>sudo chgrp root gim</p></blockquote></li><li>准备好deb包结构</li><li>修改control文件</li><li>打包为deb</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls</span></span><br><span class="line">drwxrwxr-x 4 shieber shieber 4.0K 9月   8 13:55 gim_bash_0.0.4-1_amd64</span><br><span class="line"><span class="meta">$</span><span class="bash"> dpkg-deb --build gim_bash_0.0.4-1_amd64/</span></span><br><span class="line">dpkg-deb: 正在 'gim_bash_0.0.4-1_amd64.deb' 中构建软件包 'gim'。</span><br><span class="line"><span class="meta">$</span><span class="bash"> ls </span></span><br><span class="line">drwxrwxr-x 4 shieber shieber 4.0K 9月   8 13:55 gim_bash_0.0.4-1_amd64</span><br><span class="line">-rw-r--r-- 1 shieber shieber 1.9K 9月  10 18:42 gim_bash_0.0.4-1_amd64.deb</span><br></pre></td></tr></table></figure><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo dpkg -i gim_bash_0.0.4-1_amd64.deb</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/09/10/wJoQ4U.png&quot; alt=&quot;deb&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="软件包" scheme="http://www.shieber.cn/categories/%E8%BD%AF%E4%BB%B6%E5%8C%85/"/>
    
    
      <category term="deb" scheme="http://www.shieber.cn/tags/deb/"/>
    
  </entry>
  
</feed>
